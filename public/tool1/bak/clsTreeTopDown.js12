
var resizeImage = function (settings) {
    var file = settings.file;
    var maxSize = settings.maxSize;
    var reader = new FileReader();
    var image = new Image();
    var canvas = document.createElement('canvas');
    var dataURItoBlob = function (dataURI) {
        var bytes = dataURI.split(',')[0].indexOf('base64') >= 0 ?
            atob(dataURI.split(',')[1]) :
            unescape(dataURI.split(',')[1]);
        var mime = dataURI.split(',')[0].split(':')[1].split(';')[0];
        var max = bytes.length;
        var ia = new Uint8Array(max);
        for (var i = 0; i < max; i++)
            ia[i] = bytes.charCodeAt(i);
        return new Blob([ia], { type: mime });
    };
    var resize = function () {
        var width = image.width;
        var height = image.height;
        if (width > height) {
            if (width > maxSize) {
                height *= maxSize / width;
                width = maxSize;
            }
        } else {
            if (height > maxSize) {
                width *= maxSize / height;
                height = maxSize;
            }
        }
        canvas.width = width;
        canvas.height = height;
        canvas.getContext('2d').drawImage(image, 0, 0, width, height);
        var dataUrl = canvas.toDataURL('image/jpeg');
        return dataURItoBlob(dataUrl);
    };
    return new Promise(function (ok, no) {
        if (!file.type.match(/image.*/)) {
            no(new Error("Not an image"));
            return;
        }
        reader.onload = function (readerEvent) {
            image.onload = function () { return ok(resize()); };
            image.src = readerEvent.target.result;
        };
        reader.readAsDataURL(file);
    });
};

class clsTreeTopDownCtrl {
    //static _data
    // static mRectangle = null

    idSvgSelector
    spaceBetweenCellX = 30
    spaceBetweenCellY = 50
    widthCell = 80
    heightCell = 100

    startX = 100
    startY = 100

    zoomAble = 1
    maxZoom = 10
    minZoom = 0.1
    dataPart

    setPid = 0

    optShowMarried = 1

    //Chỉ hiển thị đàn ông
    optShowOnlyMan = 0

    //Tô đậm các đàn ông Đinh của dòng họ
    optBorderMainMan = 0

    optShowDebugGrid = 0

    optShowDebugIdAndOrders = 0

    optColorLineParent = 'gray'
    optColorLineMarried = 'green'
    optRemoveImage = 0

    optDisableApiForTestLocalOnly = 0


    //1 là man, 2 là woman
    static selectingManWomanBackGround

    static doingNodeObj

    /**
     * @public clsTreeTopDownCtrl
     */
    static doingSvgObj

    static doingCmd

    //All instance tree
    static allInstance = [];


    apiIndex
    apiAdd
    apiDelete
    apiUpdate
    apiUploadImage

    apiBearToken

    /**
     *
     * @private SvgPanZoom
     */
    _panZoomTiger

    // mmRec = []

    constructor() {
        clsTreeTopDownCtrl.allInstance.push(this);
        console.log("clsTreeTopDownCtrl.constructor: ", clsTreeTopDownCtrl.allInstance);
    }

    /**
     *
     * @param idSvg
     * @returns clsTreeTopDownCtrl
     */
    static getInstanceSvgById(idSvg) {
        for (let obj of clsTreeTopDownCtrl.allInstance)
            if (obj.idSvgSelector == idSvg)
                return obj
        return null
    }

    reDrawTree(forTester = 0) {

        if (this.optDisableApiForTestLocalOnly) {
            $("#info_svg").show()
            $("#info_svg").html("<div style='position: fixed; right: 1px; top: 1px; padding: 2px 5px; background-color: orangered; color: white'> Disable API test local </div>")
        }
        let time1 = (Date.now() % 1000) / 1000;


        this.clearResetAllSvgToReDraw()

        console.log("Before sort", this.dataPart);

        //sắp xếp theo thứ tự giảm dần
        this.dataPart.sort((a, b) => (a.orders > b.orders) ? -1 : (b.orders > a.orders) ? 1 : 0);
        console.log("After sort", this.dataPart);

        //Nếu có setPID, thì tìm obj đó và lấy ra pid của obj
        let pidToListFirst = 0 //Mặc định = 0
        if (this.setPid) {
            for (let tmp of this.dataPart) {
                if (tmp.id == this.setPid) {
                    if (!pidToListFirst)
                        pidToListFirst = tmp.parent_id //Có thể = 0
                    if (pidToListFirst > 0)
                        break
                }
            }
        }
        //Remove các anh em  nếu có (giữ lại vợ chồng)
        if (this.setPid)
            for (let tmp of this.dataPart)
                if (tmp.parent_id == pidToListFirst && tmp.id != this.setPid && tmp.married_with !== this.setPid)
                    this.deleteObj(tmp)

        let obj = new clsTreeNode();
        for (let tmp of this.dataPart) {
            obj = tmp
            //Duyệt qua các node đầu tiên TOP:
            if (!obj.married_with && obj.parent_id == pidToListFirst) {
                // console.log(" xxx2 ", obj, obj.id);
                this.countColRowForObjData(obj, 0)
            }
        }

        console.log(" DataAfter setID = ", this.setPid);
        console.log(" DataAfter ORG = ", this.dataAll);
        console.log(" DataAfter Make = ", this.dataPart);

        this.moveParentsToCenterOfChildren()

        // this.neuConXaBoMeVaBenTraiTrongThiMoveConSangTrai()

        this.optimizeMoveLeftSpace()

        this.optimizeMoveRightSpace()

        this.deleteEmptyCol()

        this.drawAllNodeDebug()


        if (forTester == 1)
            return

        this.createTreeSvg()

        for (let tmp of this.dataPart) {
            this.drawLineMarried(tmp)
            this.drawLineToParent(tmp)
        }

        this.checkValidDataAndUI()

        let time2 = (Date.now() % 1000) / 1000;
        console.log("DTIME reDrawTree = ", time2 - time1);
        let dtime = time2 - time1
        $("#debug_svg").text(dtime.toFixed(2))
    }

    checkValidDataAndUI() {

        let notFoundArrayObj = []
        let that = this

        for (let obj of that.dataPart) {
            let idsvg = obj.id
            let found = 0
            $(".svg_cont_node_cls").each(function () {
                if ($(this).attr('data-svg-id') == idsvg) {

                    found = 1
                    return;
                }
            })
            if (!found)
                notFoundArrayObj.push(obj)
        }


        let strError = ''
        if (notFoundArrayObj.length > 0) {

            for (let obj of notFoundArrayObj) {
                if (this.checkIgnoreObj(obj))
                    continue
                if (this.optShowOnlyMan && !this.checkNodeIsMainMan(obj))
                    continue
                strError += "" + obj.name + "(" + obj.id + "), "
            }
            if (strError) {
                $("#check_error_node").text("Có lỗi, phần tử không hiện lên: " + strError)
                $("#check_error_node").show()
            }
        }


        console.log(" Notfound array = ", notFoundArrayObj, strError);
    }

    drawTreeSvg() {
        if (!this.idSvgSelector) {
            throw new Error("Not define idSvgSelector!");
            return;
        }
        if (!this.optShowMarried) {
            console.log(" dataPart Not optShowMarried", this.dataPart);
        }
        this.optBorderMainMan = 0
        if (this.optShowOnlyMan) {
        } else
            this.optBorderMainMan = 1

        this.reDrawTree()


        window.scrollTo((document.body.scrollWidth - document.body.clientWidth) / 2 + 200, 0);
        console.log("Scrool...", document.body.scrollLeft);

        console.log(" AllNodeAfterDraw = ", this.dataPart);
        // console.log(" AllNodeAfterDraw = ");
        // console.log(JSON.stringify(this.dataPart));

    }

    /**
     * Để gửi delete all id lên api
     * @param mm
     * @returns {string}
     */
    static getStringIdOfNodeArraySeparateByComma(mm) {
        let str = ''
        if (mm)
            for (let obj of mm) {
                str += obj.id + ' '
            }
        str = str.trim()
        str = str.replaceAll(" ", ',')
        return str
    }

    /**
     * Theo thứ tự order, vợ chồng Cả sẽ có order lớn nhất
     * @param obj
     * @param objMarried
     */
    isFirstMarriedObObj(obj, objMarried) {
        let mm = this.findGetMariedOfObj(obj)
        //Nếu chỉ có 1 vợ thì ok
        if (mm && mm.length == 1)
            return true

        //Vì đã sắp theo thứ tự lấy về, nên mm0 chính là vợ chồng cả

        // let maxOrders = -1
        // for(let vc of mm)
        //     if(vc.orders && vc.orders > maxOrders)
        //         maxOrders = vc.orders
        //
        // if(maxOrders > 0)
        //     if(objMarried.orders == maxOrders)
        //         return true

        if (objMarried.id == mm[0].id)
            return true
        return false
    }

    getMaxMinColOfChild(obj) {
        let minColChild = 1000000000
        let maxColChild = -1
        let haveChild = 0
        for (let con of this.dataPart) {
            if (con.parent_id == obj.id) {

                if (this.checkIgnoreObj(con))
                    continue

                if (minColChild < 0)
                    minColChild = con._col

                haveChild++
                if (con._col > maxColChild)
                    maxColChild = con._col
                if (con._col < minColChild)
                    minColChild = con._col
            }
        }
        if (!haveChild)
            return null
        return [minColChild, maxColChild]
    }

    hasChild(obj) {
        for (let any of this.dataPart) {
            if (this.checkIgnoreObj(any))
                continue

            if (any.parent_id == obj.id)
                return 1
        }
        return 0
    }

    hasBrotherSister(obj) {
        for (let any of this.dataPart) {
            if (this.checkIgnoreObj(any))
                continue
            if (any.id != obj.id)
                if (any.parent_id == obj.parent_id) {
                    // console.log("xxx5, anh em cua ", obj, any);
                    return 1
                }
        }
        return 0
    }

    getNodeInRow(row) {
        let mm = []
        for (let any of this.dataPart) {
            if (any._row == row)
                mm.push(any)
        }
        return mm
    }

    //Di chuyển đến cạnh phần tử gần nhất bên phải
    pushToEmptyPositionRight(obj) {
        // return;
        let minColEmptyRight = -1
        let mm = this.getNodeInRow(obj._row)
        for (let any of mm) {
            if (any.id != obj.id)
                //Tìm anh em bên phải của obj
                if (any._col > obj._col && any.parent_id == obj.parent_id) {
                    if (this.checkIgnoreObj(any))
                        continue
                    //Tìm ra anh em gần nhất bên phải
                    if (minColEmptyRight < 0)
                        minColEmptyRight = any._col
                    //Tìm thằng nhỏ nhất bên phải
                    if (minColEmptyRight > any._col)
                        minColEmptyRight = any._col
                }
        }
        //nếu anh em gần nhất có khoảng trống bên phải
        if (minColEmptyRight > 0)
            if (minColEmptyRight - 1 > obj._col) {
                obj._col = minColEmptyRight - 1
            }
    }

    //Di chuyển đến cạnh phần tử gần nhất bên trái
    pushToEmptyPositionLeft(obj) {


        // if(this.checkIgnoreObj(obj))
        //     return
        // return;
        let maxColEmptyLeft = -1
        let mm = this.getNodeInRow(obj._row)

        //Tìm mọi phần tử anh em bên trái, và lấy col lớn nhất tìm thấy
        for (let any of mm) {
            if (any.id != obj.id)
                if (any._col < obj._col && any.parent_id == obj.parent_id) {
                    if (this.checkIgnoreObj(any))
                        continue
                    if (maxColEmptyLeft < 0)
                        maxColEmptyLeft = any._col
                    //Lấy thằng lớn nhất bên trái của obj
                    if (maxColEmptyLeft < any._col)
                        maxColEmptyLeft = any._col
                }
        }
        //Nếu thấy col lớn nhất, và col đó cộng 1 vẫn trống:
        if (maxColEmptyLeft > 0)
            if (maxColEmptyLeft + 1 < obj._col) {
                obj._col = maxColEmptyLeft + 1
            }
    }

    getMaxCol() {
        let max = 0
        for (let any of this.dataPart)
            if (any._col > max)
                max = any._col
        return max
    }

    getMaxRow() {
        let max = 0
        for (let any of this.dataPart)
            if (any._row > max)
                max = any._row
        return max
    }

    deleteEmptyCol() {
        // for(let i = 0; i < 5; i++)
        {
            let maxCol = this.getMaxCol()
            for (let i = 0; i < maxCol; i++) {
                let foundCol = 0
                for (let any of this.dataPart) {
                    if (this.checkIgnoreObj(any))
                        continue
                    if (any._col == i)
                        foundCol = 1
                }

                //Tất cả các cột sau trừ đi 1
                if (!foundCol) {
                    for (let any of this.dataPart) {
                        if (any._col > i)
                            any._col--
                    }
                }
            }
        }
    }

    moveKhongCoConThiMoveSatAnhEm(r) {
        // if(r != 4)
        //     return
        for (let any of this.dataPart) {
            if (this.checkIgnoreObj(any))
                continue
            if (!any.married_with)
                if (any._row == r)
                    if (!this.hasChild(any) && this.hasBrotherSister(any)) {
                        this.pushToEmptyPositionRight(any)
                        //this.drawAllNodeDebug()
                    }
        }

        for (let any of this.dataPart) {
            if (this.checkIgnoreObj(any))
                continue
            if (!any.married_with)
                if (any._row == r)
                    if (!this.hasChild(any) && this.hasBrotherSister(any)) {
                        // console.log("xxx5 move ", any);
                        this.pushToEmptyPositionLeft(any)
                        // this.drawAllNodeDebug()
                    }
        }
    }


    checkIgnoreObj(obj) {
        if (this.optShowOnlyMan && obj.gender == 2)
            return 1;
        if (this.optShowOnlyMan && obj.married_with)
            return 1;
        if (!this.optShowMarried && obj.married_with)
            return 1;
        return 0
    }

    moveParentsToCenterOfChildren0(obj) {

        // if(obj.name == 'Le Van Suu')
        if (obj.id == 2) {
            console.log("Debug111...", obj);
        }

        //Nếu là vc thì ko cần xử lý, vì đã bám vào vc gốc
        if (obj.married_with)
            return

        //Tìm các con của obj, lấy ra min+max col
        let maxMin = this.getMaxMinColOfChild(obj)
        if (!maxMin)
            return
        let [minColChild, maxColChild] = maxMin

        let mmVoChong = [obj]
        // console.log(" mmVoChong1 = " , mmVoChong);
        let lenVoChong = 1
        //Trường hợp cả bố mẹ hiện lên, thì tính lại lenParents
        //if(!this.optShowOnlyMan)
        if (!this.optShowOnlyMan && this.optShowMarried) {
            // console.log(" mmVoChong1333 = xxx");
            //Tính số vợ của obj
            let tmp = this.findGetMariedOfObj(obj)
            if (!tmp)
                mmVoChong = [obj]
            else {
                tmp.push(obj)
                mmVoChong = tmp
            }

            lenVoChong = mmVoChong.length
        }
        let nShiftRight = (maxColChild - minColChild - lenVoChong) / 2

        if (nShiftRight < 0)
            nShiftRight = 0
        nShiftRight = Math.ceil(nShiftRight)
        // nShiftRight = Math.floor(nShiftRight)

        //Lấy ra vị trí đầu tiên cần di chuyển Obj đến
        let needMoveTo = minColChild + nShiftRight
        let deltaMove = needMoveTo - obj._col

        let hasError = 0

        //Xem có nhầm lẫn chiếm mất chỗ của 1 obj nào đó ko:
        let maxColVC = 0
        if (mmVoChong)
            for (let tmp of mmVoChong)
                if (tmp._col > maxColVC)
                    maxColVC = tmp._col

        for (let any of this.dataPart) {
            if (any._row == obj._row) {
                if (this.checkIgnoreObj(any))
                    continue
                if (maxColVC + deltaMove == obj._col) {
                    hasError = 1
                    console.log(" ... Có lỗi, ko move obj vì bị chiếm chỗ nhầm?", obj, obj.id, any);
                    break
                }
            }
        }

        if (mmVoChong)
            if (!hasError)
                for (let tmp of mmVoChong) {
                    tmp._col += deltaMove

                }
    }

    getMinColInRow(data, r) {
        let x = -1
        if (data && data.length)
            for (let obj of data) {
                if (obj._row == r) {
                    if (x < 0)
                        x = obj._col
                    if (obj._col < x)
                        x = obj._col
                }
            }
        return x
    }

    getMaxColInRow(data, r) {
        let x = -1
        if (data && data.length)
            for (let obj of data) {
                if (obj._row == r) {
                    if (x < 0)
                        x = obj._col
                    if (obj._col > x)
                        x = obj._col
                }
            }
        return x
    }

    /**
     * cột lớn hơn cha, hoặc không có cha (pid = 0) trống bên trái, xem các hàng con ở dưới, trống bên trái
     tìm số trống bên trái nhỏ nhất, và move toàn bộ cây , - col nhỏ nhất
     */
    optimizeMoveLeftSpace() {

        //Lặp lại 1 số lần nếu cần, để quét đi quét lại,
        //vì bên dưới khi đã sort, có thể sẽ thừa ra space, bên trên sẽ sort lại lần nữa...
        for (let loop = 0; loop < 3; loop++) {

            let [maxRow, maxCol] = clsTreeTopDownCtrl.getMaxColRow(this.dataPart)
            //Duyệt từ trên xuống, từ trái qua phải
            for (let r = 0; r <= maxRow; r++) {
                for (let c = 0; c <= maxCol; c++) {

                    let obj = this.getObjByColRow(c, r)
                    if (!obj)
                        continue
                    if (obj.id == 9) {
                        console.log(" xxx51 ", obj);
                    }

                    //Nếu có parent
                    if (obj.parent_id) {
                        let pr = this.getObjFromId(obj.parent_id)
                        //Nếu có cha, cột nằm bên trái cột cha, thì bỏ qua vì ko dịch chuyển nó bên trái cha làm gì
                        if (pr)
                            if (obj._col <= pr._col)
                                continue
                    }

                    //Xét obj hiện tại
                    //Bắt đầu duyệt từ trên xuống để tìm ra space trống nhỏ nhất bên trái của cây thuộc obj này
                    //Nếu space trống hàng nào đó =0 thì dừng ko move cây sang trái
                    let mmChild = this.findGetAllChildsDeepOfObj(obj)
                    mmChild.push(obj);

                    let minSpace = 100000
                    let exit1 = 0

                    for (let r1 = 0; r1 <= maxRow; r1++) {
                        let minColInRow = this.getMinColInRow(mmChild, r1)
                        if (minColInRow > 0) {
                            //Tìm từ col đó trở về 0, xem khoảng trống lớn nhất
                            for (let c2 = minColInRow - 1; c2 >= 0; c2--) {
                                //Gặp 1 phần tử đầu tiên thì break
                                if (this.getObjByColRow(c2, r1)) {
                                    let space = minColInRow - this.getObjByColRow(c2, r1)._col - 1
                                    if (space < 1) {
                                        exit1 = 1
                                        break
                                    }
                                    if (space < minSpace) {
                                        minSpace = space
                                        break
                                    }
                                }
                            }
                        }
                        if (exit1)
                            break
                    }


                    if (exit1)
                        continue

                    if (minSpace < maxCol) {
                        // console.log("xxx Minspace OK: ", minSpace, obj);
                        for (let objx of mmChild) {
                            objx._col -= minSpace
                        }
                    }
                }
            }
        }

    }

    /**
     * Tương tự hàm Left trên
     */
    optimizeMoveRightSpace() {

        //Lặp lại 1 số lần nếu cần, để quét đi quét lại,
        //vì bên dưới khi đã sort, có thể sẽ thừa ra space, bên trên sẽ sort lại lần nữa...
        for (let loop = 0; loop < 3; loop++) {

            let [maxRow, maxCol] = clsTreeTopDownCtrl.getMaxColRow(this.dataPart)
            //Duyệt từ trên xuống, từ trái qua phải
            for (let r = 0; r <= maxRow; r++) {
                for (let c = 0; c <= maxCol; c++) {

                    let obj = this.getObjByColRow(c, r)
                    if (!obj)
                        continue
                    if (obj.id == 23) {
                        console.log(" xxx51 ", obj);
                    }

                    if (obj.married_with)
                        continue;

                    //Nếu có parent
                    if (obj.parent_id) {
                        let pr = this.getObjFromId(obj.parent_id)
                        //Nếu có cha, cột nằm bên phải cột cha, thì bỏ qua vì ko dịch chuyển nữa
                        if (pr)
                            if (obj._col >= pr._col)
                                continue
                    }

                    //Xét obj hiện tại
                    //Bắt đầu duyệt từ trên xuống để tìm ra space trống nhỏ nhất bên phải của cây thuộc obj này
                    //Nếu space trống hàng nào đó =0 thì dừng ko move cây sang phải
                    let mmChild = this.findGetAllChildsDeepOfObj(obj)
                    mmChild.push(obj);

                    let minSpace = 100000
                    let exit1 = 0
                    for (let r1 = 0; r1 <= maxRow; r1++) {
                        let maxColInRow = this.getMaxColInRow(mmChild, r1)
                        if (maxColInRow >= 0) {
                            //Tìm từ col maxCol đó đến hết hàng, xem khoảng trống nhỏ nhất
                            for (let c2 = maxColInRow + 1; c2 <= maxCol; c2++) {
                                //Gặp 1 phần tử đầu tiên thì break
                                if (this.getObjByColRow(c2, r1)) {
                                    let space = this.getObjByColRow(c2, r1)._col - maxColInRow - 1
                                    if (space < 1) {
                                        exit1 = 1
                                        break
                                    }
                                    if (space < minSpace) {
                                        minSpace = space
                                        break
                                    }
                                }
                            }
                        }
                        if (exit1)
                            break
                    }

                    if (exit1)
                        continue

                    if (minSpace < maxCol) {
                        // console.log("xxx Minspace OK: ", minSpace, obj);
                        for (let objx of mmChild) {
                            objx._col += minSpace
                        }
                    }
                }
            }
        }

    }

    //Di chuyển bố mẹ sang giữa các con
    moveParentsToCenterOfChildren() {
        // return

        //Duyệt từ dưới lên trên, từ trái qua phải
        //Tính center của các con, chiều dài của bố mẹ
        //Tính vị trí đầu tiên có thể đặt bố mẹ, suy ra vị trí có thể shift ra
        let [maxRow, maxCol] = clsTreeTopDownCtrl.getMaxColRow(this.dataPart)
        for (let r = maxRow; r >= 0; r--) {
            for (let c = maxCol; c >= 0; c--) {
                for (let obj of this.dataPart) {
                    if (obj._row == r && obj._col == c) {
                        if (this.checkIgnoreObj(obj))
                            continue;
                        this.moveParentsToCenterOfChildren0(obj)
                    }
                }
            }
            //Phải thực hiện ngay sau khi move chaMe vào giữa các con
            this.moveKhongCoConThiMoveSatAnhEm(r)
            this.deleteEmptyCol()
        }
    }

    getObjByColRow(col, row) {
        for (let obj of this.dataPart) {
            if (obj._col == col && obj._row == row)
                return obj
        }
        return null
    }

    //Tìm tất cả con cháu của obj
    findGetAllChildsDeepOfObj(obj) {
        let mmChild = []
        for (let any of this.dataPart) {
            if (this.checkObjIsChildOfOther(any, obj))
                mmChild.push(any)
        }
        return mmChild
    }

    //Tìm tất cả con cháu của obj và vợ chồng
    findGetAllChildsDeepOfObjAndMarried(obj) {
        let m1 = this.findGetAllChildsDeepOfObj(obj)
        if (this.findGetMariedOfObj(obj))
            m1.push(...this.findGetMariedOfObj(obj))
        return m1;
    }

    //Nếu con xa bố mẹ, bên trái trống từ trên xuống, thì move cả cây của con sát vào
    //Có thể ko cần hàm này nữa, vì đã có hàm optimize left right...
    neuConXaBoMeVaBenTraiTrongThiMoveConSangTrai() {
        let maxRow = this.getMaxRow()
        let maxCol = this.getMaxCol()

        //Duyệt từ trên xuống, từ trái qua phải
        for (let r1 = 0; r1 <= maxRow; r1++) {
            for (let c1 = 0; c1 <= maxCol; c1++) {
                let obj = this.getObjByColRow(c1, r1)
                if (obj) {
                    let pr = this.getObjFromId(obj.parent_id)

                    for (let k = 1; k < 10; k++)
                        if (pr && obj._col >= pr._col + k) {
                            //kiểm tra cột bên cạnh con xem có trống hết từ hàng con trở xuống ko
                            let colNow = obj._col - k
                            let foundColRow = 0
                            for (let r = obj._row; r <= maxRow; r++) {
                                if (this.getObjByColRow(colNow, r)) {
                                    foundColRow = 1
                                    break
                                }
                            }
                            //Nếu ko thấy, thì nghĩa là move sang trái được
                            //Di chuyển tất cả các con cháu của obj sang trái
                            if (!foundColRow) {
                                let mmChilds = this.findGetAllChildsDeepOfObj(obj)
                                if (mmChilds.length)
                                    for (let o1 of mmChilds)
                                        o1._col--
                                obj._col--
                            }
                        }
                }
            }
        }
        //Xóa các cột trống nếu có
        this.deleteEmptyCol()
    }

    //Có phải là đinh của dòng họ không:
    checkNodeIsMainMan(obj) {
        let tmp = obj
        if (tmp.gender == 2 || tmp.married_with)
            return false
        let cc = 0
        //Kiểm tra tất cả các parent phải là MAN, thì sẽ là đinh
        while (tmp && tmp.parent_id > 0) {
            cc++
            if (cc > 10000)
                return false
            if (tmp.gender == 2 || tmp.married_with)
                return false
            tmp = this.getObjFromId(tmp.parent_id)
        }
        return true;
    }

    getRootSvgBase() {
        return document.getElementById(this.idSvgSelector);
    }

    getRootSvgIfHavePanZoom() {
        let tmp = document.querySelector("#" + this.idSvgSelector + ' .svg-pan-zoom_viewport')
        if (tmp)
            return tmp
        return document.getElementById(this.idSvgSelector);
    }

    getMaxIdNode() {
        let max = 0
        for (let any of this.dataPart) {
            if (any.id > max)
                max = any.id
        }
        return max
    }

    createTreeSvg() {


        let [maxRow, maxCol] = clsTreeTopDownCtrl.getMaxColRow(this.dataPart)
        console.log("maxR,C = ", maxRow, maxCol);
        maxRow++ //Thêm 1 cho rộng
        maxCol++
        let grid = this.getRootSvgIfHavePanZoom()
        let startX = this.startX;
        let startY = this.startY;
        let rectWidth = this.widthCell
        let rectHeight = this.heightCell

        if (this.optRemoveImage)
            rectHeight = this.heightCell - 30

        let nrOfColumns = maxCol;
        let nrOfRows = maxRow;

        let horizontalPadding = this.spaceBetweenCellX;
        let verticalPadding = this.spaceBetweenCellY;

        let strokeWidth = 0;

        let rectX = startX;

        for (let colIdx = 0; colIdx < nrOfColumns; colIdx++) {
            let rectY = startY;
            for (let rowIdx = 0; rowIdx < nrOfRows; rowIdx++) {

                //Tạo rect nếu cần
                // let rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                // rect.setAttribute("x", rectX);
                // rect.setAttribute("y", rectY);
                // rect.setAttribute("width", rectWidth);
                // rect.setAttribute("height", rectHeight);
                // rect.setAttribute("style", "fill:none;stroke:gray;stroke-width:" +
                //     strokeWidth + ";fill-opacity:0.1;stroke-opacity:0.6");
                // // Rounded corners
                // rect.setAttribute("rx", "10");
                // mmRec[rowIdx + "x" + colIdx] = rect;

                let foundRec = 0
                for (let obj of this.dataPart) {
                    // console.log(" obj = ", obj);
                    if (obj._row == rowIdx && obj._col == colIdx) {
                        if (obj.child_type == 1) {
                        }
                        // console.log("Draw: " , obj, obj.name);
                        let padColor = null
                        let padNewBorder = ''

                        if (this.optBorderMainMan)
                            if (this.checkNodeIsMainMan(obj, this.dataPart)) {
                                padNewBorder = ';border-color: green; border-width: 0px'
                                padColor = '; color: red ; '
                                // rect.setAttribute("style", "fill:none;stroke:red;stroke-width:" +
                                //     strokeWidth + ";fill-opacity:0.1;stroke-opacity:0.6");
                            }

                        let newDiv1 = document.createElement('div');
                        let imgLink = '/images/icon/man.jpg'
                        if (obj.gender == 2)
                            imgLink = '/images/icon/woman.jpg'

                        if (obj._image_list && obj._image_list.length && obj._image_list[0].thumb && obj._image_list[0].thumb.indexOf("/") > -1)
                            imgLink = obj._image_list[0].thumb

                        // console.log(" xxx 2 imgLink: ", imgLink);

                        let objContSvg = this.getRectOfObj(obj)
                        let createNew = 0

                        if (!objContSvg) {
                            createNew = 1
                            // console.log(" Create new: ", obj.name, obj);
                            objContSvg = document.createElementNS('http://www.w3.org/2000/svg', "foreignObject");
                        }

                        let padShow
                        if (obj._mark_add_new) {
                            padNewBorder = ';border-color: red;'
                            padShow = ';display: block;'
                            obj._mark_add_new = 0
                        }

                        //nếu ko tạo mới thì chỉ set lại thuộc tính:
                        objContSvg.setAttribute('id', "svg_cont_node_" + obj.id);
                        objContSvg.setAttribute('data-svg-id', obj.id);
                        objContSvg.setAttribute('class', "svg_cont_node_cls");
                        objContSvg.setAttribute('x', rectX);
                        objContSvg.setAttribute('y', rectY);
                        objContSvg.setAttribute('width', this.widthCell);
                        objContSvg.setAttribute('height', rectHeight);


                        if (obj.birthday == undefined)
                            obj.birthday = ''


                        let strName = "<span id='id_node_name_" + obj.id + "' style='" + padColor + "'>" + obj.name;
                        if (this.optShowDebugGrid)
                            strName += " <br> (" + rowIdx + "x" + colIdx + ")"
                        strName += "</span>"

                        if (createNew) {

                            //Remove tất cả các div blink cũ
                            $(".img_new_node_blink").find("[id!='id_node_div_cont_" + obj.id + "']").css("display", 'none')

                            let padHeight = ''
                            if (this.optRemoveImage)
                                padHeight = ' ;height: 60px;';

                            let bgImg = ';background-size: 100% 100%;background-image: url("/images/border-frame-img/khung-anh-111.png");';

                            let htmlDiv = "<div style='" + bgImg + padNewBorder + padHeight + "' id='id_node_div_cont_" +
                                obj.id + "' class='node_cont' data-gender='" + obj.gender + "' title='" + obj.name + " - " + obj.id + ' . ' + rowIdx + '/' + colIdx + "'>" +
                                " <div class='img_new_node_blink blink_me' style='" + padShow + "'> </div> "

                            if (!this.optRemoveImage)
                                htmlDiv += " <img id='id_node_image_" + obj.id + "' src='" + imgLink + "' style='" + "'>  <br>  "

                            htmlDiv += strName
                            htmlDiv += " <div class='debug_id_orders' style='display: none'> (ID:" + obj.id + ' - ' + rowIdx + 'x' + colIdx + ")" + " orders=" + obj.orders + '</div>'

                            htmlDiv += " <div id='id_node_birthday_" + obj.id + "' style='margin-top: 5px; font-style: italic'>" + obj.birthday + "</div>" +
                                " " + " <div id='id_node_menu_" + obj.id + "' data-id='" + obj.id +
                                "' class='node_edit_btn context-menu-one btn btn-neutral' onclick1='clickEditBtn(this, \"" + obj.id + "\")'>" +
                                " &#9776; </div> " +
                                " </div> ";

                            newDiv1.innerHTML = htmlDiv

                            objContSvg.appendChild(newDiv1);
                            grid.appendChild(objContSvg);
                        }

                        foundRec = 1

                        if (createNew) {
                            obj._divCont = objContSvg
                            //this.mmRec[obj.id] = objContSvg;
                        }

                        break
                    }
                }
                // if(foundRec)
                //     grid.appendChild(rect);
                // else
                //     if(this.optShowDebugGrid)
                //         grid.appendChild(rect);
                rectY += rectHeight + verticalPadding;
            }
            rectX += rectWidth + horizontalPadding;
        }

        let svgWidth = startX + nrOfColumns * (horizontalPadding + rectWidth + strokeWidth);
        let svgHeight = startY + nrOfRows * (verticalPadding + rectHeight + strokeWidth);

        //Giữ lại size nguyên bản cho svgRoot, để sang zoom sẽ dùng đến
        this._sizeOrgX = svgWidth
        this._sizeOrgY = svgHeight
        // console.log("xxx Zoom... _sizeOrgX set new: ", this._sizeOrgX);
        // console.log("xxx Zoom... _sizeOrgY set new: ", this._sizeOrgY);

        let gridBase = this.getRootSvgBase()
        let rateZoom = 1
        //Nếu có ratezoom thì size svg thay đổi
        if (this._panZoomTiger) {
            rateZoom = this._panZoomTiger.getSizes().realZoom
            horizontalPadding *= rateZoom
            verticalPadding *= rateZoom
            rectWidth *= rateZoom
            rectHeight *= rateZoom
            // Resize the grid to fit its containing rectangles
            svgWidth = startX + nrOfColumns * (horizontalPadding + rectWidth + strokeWidth);
            svgHeight = startY + nrOfRows * (verticalPadding + rectHeight + strokeWidth);
        }

        console.log(" Resize grid ...", svgWidth, svgHeight, 'nrOfColumns=', nrOfColumns, nrOfRows, 'horizontalPadding=', horizontalPadding, "rectWidth=", rectWidth);
        gridBase.setAttribute("width", svgWidth);
        gridBase.setAttribute("height", svgHeight);

        //Và resize lại panzoom vừa với svgRoot
        if (this._panZoomTiger) {
            this._panZoomTiger.resize(); // update SVG cached size and controls positions
        }
    }

    setZoomAble() {

        if (!this.zoomAble)
            return

        //For mobile
        let eventsHandler;
        eventsHandler = {
            haltEventListeners: ['touchstart', 'touchend', 'touchmove', 'touchleave', 'touchcancel']
            , init: function (options) {
                var instance = options.instance
                    , initialScale = 1
                    , pannedX = 0
                    , pannedY = 0

                // Init Hammer
                // Listen only for pointer and touch events
                this.hammer = Hammer(options.svgElement, {
                    inputClass: Hammer.SUPPORT_POINTER_EVENTS ? Hammer.PointerEventInput : Hammer.TouchInput
                })

                // Enable pinch
                this.hammer.get('pinch').set({enable: true})

                // Handle double tap
                this.hammer.on('doubletap', function (ev) {
                    instance.zoomIn()
                })

                // Handle pan
                this.hammer.on('panstart panmove', function (ev) {
                    // On pan start reset panned variables
                    if (ev.type === 'panstart') {
                        pannedX = 0
                        pannedY = 0
                    }

                    // Pan only the difference
                    instance.panBy({x: ev.deltaX - pannedX, y: ev.deltaY - pannedY})
                    pannedX = ev.deltaX
                    pannedY = ev.deltaY
                })

                // Handle pinch
                this.hammer.on('pinchstart pinchmove', function (ev) {
                    // On pinch start remember initial zoom
                    if (ev.type === 'pinchstart') {
                        initialScale = instance.getZoom()
                        instance.zoomAtPoint(initialScale * ev.scale, {x: ev.center.x, y: ev.center.y})
                    }

                    instance.zoomAtPoint(initialScale * ev.scale, {x: ev.center.x, y: ev.center.y})
                })

                // Prevent moving the page on some devices when panning over SVG
                options.svgElement.addEventListener('touchmove', function (e) {
                    e.preventDefault();
                });
            }
            , destroy: function () {
                this.hammer.destroy()
            }
        }

        let that = this
        this._panZoomTiger = svgPanZoom("#" + this.idSvgSelector, {
            // zoomEnabled: true,
            // controlIconsEnabled: true,
            fit: false,
            center: true,
            minZoom: this.minZoom,
            maxZoom: this.maxZoom,
            customEventsHandler: eventsHandler,
            onZoom: function () {
                let gridRoot = that.getRootSvgBase()
                //Resize SVG to zoom view port
                //để đẹp fit đẹp hơn và download đúng view đó
                let zoomInfo = that._panZoomTiger.getSizes()
                //Trong mọi trường hợp, Khi zoom thay đổi, thì svgRoot sẽ resize theo tỷ lệ zoom, từ size gốc Base
                gridRoot.setAttribute("width", that._sizeOrgX * zoomInfo.realZoom);
                gridRoot.setAttribute("height", that._sizeOrgY * zoomInfo.realZoom);
            }
        });

    }

    getRectOfObj(node) {
        if (!node)
            return null
        if (node._divCont)
            return node._divCont
        return null
    }

    drawLineToParent(obj) {

        if (!obj.parent_id)
            return
        //Con dâu rể ko nối đến cha
        if (obj.child_type || obj.married_with)
            return

        // console.log(" OBJx = ", obj, data);

        let pObj = this.getObjFromId(obj.parent_id)

        let recChild = this.getRectOfObj(obj)
        let recParent = this.getRectOfObj(pObj)

        if (!recChild || !recParent) {
            console.log(" Not found child or not found parent: ", obj);
            return null
        }

        let xChild = parseFloat(recChild.getAttribute('x'));
        let yChild = parseFloat(recChild.getAttribute('y'));
        let wChild = parseFloat(recChild.getAttribute('width'));
        let hChild = parseFloat(recChild.getAttribute('height'));

        let xPar = parseFloat(recParent.getAttribute('x'));
        let yPar = parseFloat(recParent.getAttribute('y'));
        let wPar = parseFloat(recParent.getAttribute('width'));
        let hPar = parseFloat(recParent.getAttribute('height'));

        let grid = this.getRootSvgIfHavePanZoom()

        let px, py
        let polyLine = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
        polyLine.setAttribute("id", 'line_to_parent_' + obj.id)
        let strLine = ''

        //Nếu có VC, Thì con sẽ nối vào điểm giữa vc (và có option showMarried)
        if (!this.optShowOnlyMan && this.optShowMarried && this.findGetMariedOfObj(pObj)) {

            let mySecondMother = null
            let xMother
            let yMother
            let wMother
            let hMother
            let nthMarried = 1
            //Nếu là con của mẹ 2,3...
            if (obj.child_of_second_married) {

                mySecondMother = this.getObjFromId(obj.child_of_second_married)

                //kiểm tra xem thứ tự của bố me có phải vợ cả ko
                //Nếu không phải vợ chồng cả, thì mới coi là vợ chồng 2:
                if (this.isFirstMarriedObObj(pObj, mySecondMother)) {
                    console.log("xxx1:  vợ chồng cả ", obj, pObj, mySecondMother);
                    console.log("xxx1: các vợ ", this.findGetMariedOfObj(pObj));
                    mySecondMother = null
                }

                if (mySecondMother) {

                    //Vợ/C thứ mấy của obj
                    nthMarried = mySecondMother._col - pObj._col

                    let recMother = this.getRectOfObj(mySecondMother)
                    xMother = parseFloat(recMother.getAttribute('x'));
                    yMother = parseFloat(recMother.getAttribute('y'));
                    wMother = parseFloat(recMother.getAttribute('width'));
                    hMother = parseFloat(recMother.getAttribute('height'));

                    // mySecondMother.name = " abc "
                    // obj.name = '111';
                    // $('#id_node_name_' + mySecondMother.id).text(mySecondMother.name + " / " + nthMarried)
                }
            }

            //Giữa trên của con
            px = xChild + wChild / 2
            py = yChild
            strLine += px + "," + py

            //Dịch lên trên
            px = xChild + wChild / 2
            py = yChild - this.spaceBetweenCellY / 2
            if (mySecondMother)
                py = py + 4 * nthMarried

            strLine += " " + px + "," + py

            //Dịch sang điểm nối bố mẹ
            if (mySecondMother) {
                polyLine.setAttribute("stroke", this.optColorLineParent)
                polyLine.setAttribute("stroke-dasharray", "5,5")
                px = xMother - this.spaceBetweenCellX / 2
                py = yChild - this.spaceBetweenCellY / 2 + 4 * nthMarried
            } else {

                polyLine.setAttribute("stroke", this.optColorLineParent)
                px = xPar + wPar + this.spaceBetweenCellX / 2
                py = yChild - this.spaceBetweenCellY / 2
            }


            strLine += " " + px + "," + py

            //Dịch lên trên
            //px = xPar + wPar/2
            py = yPar + hPar / 2
            strLine += " " + px + "," + py

            // console.log(" drawLineMarried: StrLine = ", strLine);

            polyLine.setAttribute('points', strLine);

            polyLine.setAttribute("stroke-width", 1)
            polyLine.setAttribute("fill", "none")
            grid.appendChild(polyLine)

        } else {

            //Nếu không có VC thì  nối vào đáy của cha
            px = xChild + wChild / 2
            py = yChild
            strLine += px + "," + py

            px = xChild + wChild / 2
            py = yChild - this.spaceBetweenCellY / 2
            strLine += " " + px + "," + py

            px = xPar + wPar / 2
            py = yChild - this.spaceBetweenCellY / 2
            strLine += " " + px + "," + py

            px = xPar + wPar / 2
            py = yPar + hPar
            strLine += " " + px + "," + py

            // console.log(" drawLineMarried: StrLine = ", strLine);

            polyLine.setAttribute('points', strLine);
            polyLine.setAttribute("stroke", this.optColorLineParent)
            polyLine.setAttribute("stroke-width", 1)
            polyLine.setAttribute("fill", "none")
            grid.appendChild(polyLine)
        }
    }

    drawLineMarried(obj) {

        if (this.optShowOnlyMan)
            return
        if (!this.optShowMarried) {
            return
        }

        let mMarried = this.findGetMariedOfObj(obj)
        if (!mMarried)
            return null

        // console.log(" obj/married = ", obj, mMarried);

        let rec
        rec = document.getElementById('svg_cont_node_' + obj.id)

        if (!rec)
            return null

        let x1 = parseFloat(rec.getAttribute('x'));
        let y1 = parseFloat(rec.getAttribute('y'));
        let w1 = parseFloat(rec.getAttribute('width'));
        let h1 = parseFloat(rec.getAttribute('height'));

        // console.log(" x1, y1, w1, h1" , x1, y1, w1, h1);

        let grid = this.getRootSvgIfHavePanZoom()

        let px, py
        let polyLine = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
        polyLine.setAttribute("id", 'line_to_married_' + obj.id)
        let strLine = ''

        px = x1 + w1
        py = y1 + h1 / 2
        strLine += px + "," + py

        px = x1 + w1 + this.spaceBetweenCellX
        py = y1 + h1 / 2
        strLine += " " + px + "," + py

        // console.log(" drawLineMarried: StrLine = ", strLine);

        polyLine.setAttribute('points', strLine);
        polyLine.setAttribute("stroke", this.optColorLineMarried)
        polyLine.setAttribute("stroke-width", 1)
        polyLine.setAttribute("fill", "none")
        grid.appendChild(polyLine)

        //Từ vợ chồng thứ 2 trở đi, vẽ kiểu đi vòng lên trên
        let cc = 0;
        if (mMarried.length > 1) {
            for (let mr of mMarried) {
                if (cc > mMarried.length - 2)
                    break
                polyLine = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                polyLine.setAttribute("id", 'line_to_married_' + obj.id)

                let strLine = ''

                px = x1 + w1
                py = y1 + h1 / 2
                strLine += px + "," + py

                px = x1 + w1 + this.spaceBetweenCellX / 2
                py = y1 + h1 / 2
                strLine += " " + px + "," + py

                px = x1 + w1 + this.spaceBetweenCellX / 2
                py = y1 - 10
                strLine += " " + px + "," + py

                //Đoạn nối bên trên dài
                px = x1 + 2 * w1 + cc * w1 + this.spaceBetweenCellX * 1.5 + cc * this.spaceBetweenCellX
                py = y1 - 10
                strLine += " " + px + "," + py

                py = y1 + h1 / 2
                strLine += " " + px + "," + py

                px = x1 + 2 * w1 + cc * w1 + this.spaceBetweenCellX * 2 + cc * this.spaceBetweenCellX
                py = y1 + h1 / 2
                strLine += " " + px + "," + py

                // console.log(" drawLineMarried: StrLine = ", strLine);

                polyLine.setAttribute('points', strLine);
                polyLine.setAttribute("stroke", this.optColorLineMarried)

                polyLine.setAttribute("stroke-width", 1)
                // polyLine.setAttribute("stroke-dasharray", '2 4')
                polyLine.setAttribute("fill", "none")
                grid.appendChild(polyLine)

                cc++;
            }

        }

    }

    zoomIn(n) {
        this._panZoomTiger.zoomIn(n)
    }

    updateBBox() {
        this._panZoomTiger.updateBBox()
    }

    fit() {
        this._panZoomTiger.fit()
    }

    resize() {
        this._panZoomTiger.resize()
    }

    center() {
        this._panZoomTiger.center()
    }


    static zoomIn(idSvg) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        // svg._panZoomTiger.fit()
        svg._panZoomTiger.zoomIn()
    }

    static updateBBox(idSvg) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        svg._panZoomTiger.updateBBox()
    }

    static fit(idSvg) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        svg._panZoomTiger.fit()
    }

    static resize(idSvg) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        svg._panZoomTiger.resize()
    }

    static center(idSvg) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        // svg._panZoomTiger.fit()
        svg._panZoomTiger.center()
    }


    /**
     * Khi tải ảnh xuống, cần tải đúng kích thước đang chọn, nếu zoom<1 thì zoom về 1 để không bị quá  nhỏ
     * và ảnh phải về center căn giữa svg, không bị mất phần nào
     * @param idSvg
     * @param name
     */
    static downloadImagePng(idSvg, name = 'saveImg') {

        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)

        //Nếu zoom quá bé, thì reset về default 1?
        if (svg._panZoomTiger.getSizes().realZoom < 1)
            svg._panZoomTiger.zoom(1)

        //Đúng thứ tự này ok: user đang ở zoom hiện tại, updateBBox, resize, center : sẽ tải ảnh ok ở zoom hiện tại
        svg._panZoomTiger.updateBBox()
        svg._panZoomTiger.resize()
        svg._panZoomTiger.center()


        // return;
        setTimeout(function () {
            domtoimage.toJpeg(document.getElementById(idSvg), {quality: 1, bgcolor: 'white'})
                //domtoimage.toJpeg(document.getElementsByClassName('svg-pan-zoom_viewport')[0], {quality: 1, bgcolor: 'white'})
                .then(function (dataUrl) {
                    var link = document.createElement('a');
                    link.download = name;
                    link.href = dataUrl;
                    link.click();
                });
        }, 500)

    }

    static downloadImageSvg(idSvg, name = 'saveSvg') {

        let svg = clsTreeTopDownCtrl.getInstanceSvgById(idSvg)
        //Nếu zoom quá bé, thì reset về default 1?
        if (svg._panZoomTiger.getSizes().realZoom < 1)
            svg._panZoomTiger.zoom(1)

        //Đúng thứ tự này ok: user đang ở zoom hiện tại, updateBBox, resize, center : sẽ tải ảnh ok ở zoom hiện tại
        svg._panZoomTiger.updateBBox()
        svg._panZoomTiger.resize()
        svg._panZoomTiger.center()

        setTimeout(function () {

            function filter(node) {
                return (node.tagName !== 'i');
            }

            var elm = document.getElementsByTagName("g")[0];
            elm = document.getElementById(idSvg);

            domtoimage.toSvg(elm, {filter: filter})
                .then(function (dataUrl) {
                    //                console.log(" Datax: " + dataUrl);
                    /* do something */
                    window.saveAs(dataUrl, name);
                });
        }, 500)
    }

    // getMaxColInRow(row) {
    //     let con = new clsTreeNode()
    //     let max = -10
    //     for (let con0 of this.dataPart) {
    //         con = con0
    //         if (con._row == row)
    //             if (max < con._col)
    //                 max = con._col
    //     }
    //     return max
    // }


    clearResetAllSvgToReDraw() {
        this.resetAllColRowToDefault()
        this.removeAllConnectLineParentAndMarried()
        this.removeAllObjectSvgDrawed()
    }

    resetAllColRowToDefault() {
        for (let tmp of this.dataPart)
            tmp._col = tmp._row = -1
    }

    getObjFromId(id) {
        for (let any of this.dataPart) {
            if (any.id == id)
                return any
        }
        return null;
    }

    checkObjIsChildOfOther(obj, other) {
        let tmp = obj
        for (let i = 0; i < 10000; i++) {
            if (tmp.parent_id == other.id)
                return true
            tmp = this.getObjFromId(tmp.parent_id, this.dataPart)
            if (!tmp || !tmp.parent_id)
                return false
        }
        return false
    }

    //Tìm col cho một obj xét mới
    //Xét 1 obj
    //Duyệt tất cả các phần tử bên dưới hàng hiện tại
    //Nếu các phần tử không phải là con/cháu của obj, thì obj không thể đứng cùng cột tử đó, mà phải sau cột đó
    //và nếu nó là con đầu tiên của cha  nó, thì nó phải có col = cha nó
    findColForNewObj(obj) {
        console.log("Find for obj: ", obj);
        // return 0
        let any = new clsTreeNode()
        let maxColValid = 0
        for (let any of this.dataPart) {
            //Xem các node ở hàng dưới
            if (any._row > obj._row) {
                //Nếu thấy node nào đó ko phải con cháu, thì col cần tìm sẽ + thêm 1
                //nếu ko có con cháu thì đứng yên là ok ?
                //if(this.hasChild(obj)) //đứng yên thì sẽ bị trường hợp Cha move ra giữa các con, thì đè lên chú
                if (!this.checkObjIsChildOfOther(any, obj, this.dataPart)) {
                    if (any._col >= maxColValid)
                        maxColValid = any._col + 1
                }

            }
        }
        //Chiếu lên trên, nếu nó là con đầu của cha, nghĩa là trước nó ko có anh em nào
        //thì col của nó bằng cha
        if (this.getObjFromId(obj.parent_id))
            // if (obj.parent_id > 0)
        {
            let isFirstChild = 1
            for (let any of this.dataPart)
                if (any._row == obj._row &&
                    any.parent_id == obj.parent_id &&
                    any._col < obj._col)
                    isFirstChild = 0

            //Nếu nó là con đầu của cha nó
            if (isFirstChild) {
                let colOfParent = this.getObjFromId(obj.parent_id)._col
                if (colOfParent > maxColValid)
                    return colOfParent
            }
        }
        return maxColValid
    }

    /**
     * Vẽ debug vào các ô hàng cột của 1 table
     * @param obj
     */
    drawNodeDebug(obj) {
        let span = $("#span-debug-" + obj._row + '-' + obj._col)
        span.html(obj.name)
    }

    /**
     * Vẽ debug vào các ô hàng cột của 1 table
     * @param data
     */
    drawAllNodeDebug() {
        //    return
        //Xóa hết các node:
        for (let i = 0; i < 100; i++)
            for (let j = 0; j < 100; j++) {
                let span = $("#span-debug-" + i + '-' + j)
                span.html('')
            }

        let con = new clsTreeNode()
        for (let con0 of this.dataPart) {
            // console.log(" Draw...", con0);
            con = con0
            let span = $("#span-debug-" + con._row + '-' + con._col)
            span.html(con.name)
        }
    }

    //Cập nhật thông tin thay đổi node lên UI
    updateNodeUI(node) {
        let id = node.id
        $("#id_node_name_" + id).text(node.name)
        let imgLink
        if (node._image_list && node._image_list.length && node._image_list[0].thumb && node._image_list[0].thumb.indexOf("/") > -1)
            imgLink = node._image_list[0].thumb
        $("#id_node_image_" + id).src(imgLink)
        $("#id_node_birthday_" + id).text(node.birthday)
    }

    removeAllConnectLineParentAndMarried() {
        $("#" + this.idSvgSelector).find("[id^=line_to_parent_]").remove()
        $("#" + this.idSvgSelector).find("[id^=line_to_married_]").remove()
    }

    removeAllObjectSvgDrawed() {
        for (let any of this.dataPart)
            any._divCont = null
        $(".svg_cont_node_cls").remove()
    }

    countColRowForObjData(obj, row) {

        if (this.optShowOnlyMan && obj.gender == 2)
            return;
        if (this.optShowOnlyMan && obj.married_with)
            return;

        // console.log("xxx2 --- OBJ = Level = " + row + " : ", obj);

        //Mặc định cột của obj sẽ là cột tiếp theo sau phần tử đang có
        //Nếu chưa có phần tử n ào trong hàng thì col =0
        let maxColThisRow = this.getMaxColInRow(this.dataPart, row)
        //Tăng col lên 1 vì cho vào cuối hàng
        if (maxColThisRow < 0)
            obj._col = 0;
        else
            obj._col = maxColThisRow + 1
        obj._row = row

        let goodCol = this.findColForNewObj(obj)
        if (goodCol > obj._col)
            obj._col = goodCol

        // console.log("xxx2, col/row = ", obj, obj.id, obj._col, obj._row);

        this.drawNodeDebug(obj)

        //VC chỉ cần thêm chỗ này, nếu bỏ vc đi thì bỏ ở đây là xong
        //Khi đó trở thành cây 1 gốc (như là phả hệ chỉ trong dòng họ), hoặc cây tổ chức
        //Tìm vc để đặt bên cạnh
        let countNextMarried = 1
        //Nếu không show Man, thì cũng ko show married
        if (!this.optShowOnlyMan)
            if (this.optShowMarried)
                for (let any of this.dataPart) {
                    if (any.married_with == obj.id) {
                        any._col = obj._col + countNextMarried
                        any._row = row
                        countNextMarried++
                        this.drawNodeDebug(any)
                    }
                }

        row++
        let con = new clsTreeNode()
        for (let con of this.dataPart) {
            if (con.married_with) {
                continue
            }
            if (con.parent_id == obj.id) {

                // console.log("xxx21, col/row = ", con, con.id, con._col, con._row);
                this.countColRowForObjData(con, row)
            }
        }
    }

    static getMaxColRow(payload) {
        let nCol = [];
        let maxCol = 0
        let maxRow = 0
        for (let obj of payload) {
            if (obj._row > maxRow)
                maxRow = obj._row
            if (obj._col > maxCol)
                maxCol = obj._col
        }
        return [maxRow, maxCol]
    }

    findMyChilds(obj) {
        let mret = []
        for (let any of this.dataPart) {
            if (any.parent_id == obj.id)
                mret.push(any)
        }

        if (mret.length == 0)
            return null
        return mret
    }

    deleteObjAndAllChildAndMarried(obj) {
        this.deleteObjAndAllChild(obj, 1)
    }

    deleteObjAndAllChild(obj, withMarried = 0) {
        let mmDel = this.findGetAllChildsDeepOfObj(obj)
        mmDel.push(obj)

        if (withMarried)
            if (this.findGetMariedOfObj(obj))
                mmDel.push(...this.findGetMariedOfObj(obj))

        console.log(" mmDel = ", mmDel);
        console.log(" Array1  before del: ", this.dataPart);
        for (let del of mmDel) {
            this.dataPart.splice(this.dataPart.findIndex(function (i) {
                return i.id == del.id;
            }), 1);
        }
    }

    deleteArrayIdObj(mmId) {

        this.dataPart = this.dataPart.filter(item => !mmId.includes(item.id));

        // this.dataPart.splice(this.dataPart.findIndex(function(i){
        //     console.log("xxx1 ", i.id, mmId);
        //     return mmId.includes(i.id);
        // }), 1);
    }

    deleteObj(obj) {
        this.dataPart = this.dataPart.filter(item => item.id !== obj.id);
    }

    findGetMariedOfObj(obj) {
        let mret = []
        for (let any of this.dataPart) {
            if (any.married_with == obj.id)
                mret.push(any)
        }
        if (mret.length == 0)
            return null

        return mret
    }

    /**
     *
     * @param treeIns clsTreeTopDownCtrl
     * @param objNode
     * @param action
     * @param newName
     * @param imgLink
     */
    static nodeAction(action, objNodeAction, doingNode) {

        let treeIns = clsTreeTopDownCtrl.doingSvgObj
        // let objNode = clsTreeTopDownCtrl.doingNodeObj

        // let newName = objNodeNew.name
        // let imgLink  = objNodeNew.thumb
        // let newId  = objNodeNew.id

        //let idSvgRoot = this1.closest('.root_svg').attr('id')

        console.log(" ID Root = ", treeIns.idSvgSelector, doingNode);

        // let treeIns = new clsTreeTopDownCtrl()
        // treeIns = clsTreeTopDownCtrl.getInstanceSvgById(idSvgRoot)

        console.log("treeIns.data = ", treeIns.dataPart);

        if (action == 'edit_node') {
            // objNode.name = $("#new_name").val()
            // objNode.birthday = $("#new_birthday").val()
            // objNode.orders = $("#new_orders").val()
            // objNode.gender = $("input[name=new_gender]:checked").val(),
            console.log("Edit node: ", doingNode, treeIns.dataPart);
            //treeIns.updateNodeUI(objNodeAction)
            treeIns.reDrawTree()
            return;
        }

        treeIns.removeAllConnectLineParentAndMarried()

        let newObj = new clsTreeNode();

        //nếu là các add_child, add_married
        if (action == 'add_child' || action == 'add_married') {
            if (treeIns.optDisableApiForTestLocalOnly)
                newObj.id = treeIns.getMaxIdNode() + 1
            else
                newObj.id = objNodeAction.id
        }

        newObj.name = objNodeAction.name

        newObj._col = -1
        newObj._row = -1
        newObj._mark_add_new = 1
        newObj._image_list = objNodeAction._image_list
        // newObj.gender = $("input[name=new_gender]:checked").val()
        newObj.gender = objNodeAction.gender
        newObj.birthday = objNodeAction.birthday

        if (!newObj.orders)
            newObj.orders = 0

        if (action == 'add_child') {
            newObj.parent_id = doingNode.id
            //Nếu là thêm con cho vợ/chồng, thì phải gán parent về gốc
            if (doingNode.married_with) {
                console.log(" xxxxx 111");
                let pObj = treeIns.getObjFromId(doingNode.married_with)
                newObj.parent_id = pObj.id

                //Nếu như là vợ chồng 2 của bố mẹ, thì sẽ cần gán child_of_second_married
                if (doingNode._col > pObj._col + 1) {
                    console.log(" xxxxx 112");
                    newObj.child_of_second_married = doingNode.id
                }
            }
        }

        if (action == 'add_married') {
            //newObj.name = 'Vo ' + obj.id
            newObj.parent_id = doingNode.parent_id
            newObj.married_with = doingNode.id
            newObj.child_type = 2
        }

        treeIns.dataPart.push(newObj)
        treeIns.reDrawTree()
    }

    static tester1() {

        $("#fixed_top_menu").css('position', 'relative')

        let svg1 = new clsTreeTopDownCtrl()
        svg1.widthCell = 60
        svg1.spaceBetweenCellX = 20
        svg1.spaceBetweenCellY = 50
        svg1.idSvgSelector = 'svg_grid'
        svg1.optShowMarried = 1
        svg1.optShowOnlyMan = 0
        svg1.optDisableApiForTestLocalOnly = 1
        svg1.optDisableApiForTestLocalOnly = 1


        let data = '[{"id":1,"name":"A1","parent_id":0,"created_at":"2022-12-30T03:01:23.000000Z","deleted_at":null,"orders":1112,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":9,"name":"A4","parent_id":0,"created_at":"2022-12-30T03:40:02.000000Z","deleted_at":null,"orders":100,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":11,"name":"17","parent_id":1,"created_at":"2022-12-30T08:53:29.000000Z","deleted_at":null,"orders":66,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":8,"name":"A16","parent_id":1,"created_at":"2022-12-30T03:02:21.000000Z","deleted_at":null,"orders":65,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":62,"name":"15","parent_id":1,"created_at":"2023-01-09T05:36:09.000000Z","deleted_at":null,"orders":64,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":13,"name":"A1-Vo2","parent_id":0,"created_at":"2022-12-30T09:14:02.000000Z","deleted_at":null,"orders":51,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":14,"name":"A1 Vo31","parent_id":0,"created_at":"2022-12-30T09:44:46.000000Z","deleted_at":null,"orders":50,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":2,"name":"A2","parent_id":0,"created_at":"2022-12-30T03:01:26.000000Z","deleted_at":null,"orders":10,"child_type":2,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":7,"name":"A22","parent_id":2,"created_at":"2022-12-30T03:02:14.000000Z","deleted_at":null,"orders":10,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":15,"name":"14","parent_id":1,"created_at":"2022-12-30T12:16:15.000000Z","deleted_at":null,"orders":6,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":14,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":4,"name":"A1-Vo1","parent_id":0,"created_at":"2022-12-30T03:01:42.000000Z","deleted_at":null,"orders":5,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":12,"name":"A13","parent_id":1,"created_at":"2022-12-30T08:55:39.000000Z","deleted_at":null,"orders":4,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":3,"name":"A3","parent_id":0,"created_at":"2022-12-30T03:01:30.000000Z","deleted_at":null,"orders":null,"child_type":3,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":6,"name":"A21","parent_id":2,"created_at":"2022-12-30T03:02:10.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":10,"name":"21 - Vo","parent_id":2,"created_at":"2022-12-30T03:45:12.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":6,"image_list":"","_image_list":null,"has_child":0},{"id":17,"name":"31","parent_id":3,"created_at":"2022-12-30T13:57:13.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":18,"name":"311","parent_id":17,"created_at":"2022-12-30T14:36:15.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":19,"name":"312","parent_id":17,"created_at":"2022-12-30T14:36:19.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":20,"name":"311-Vo","parent_id":17,"created_at":"2022-12-30T14:36:27.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":18,"image_list":"","_image_list":null,"has_child":0},{"id":21,"name":"221","parent_id":7,"created_at":"2022-12-30T14:36:36.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":22,"name":"222","parent_id":7,"created_at":"2022-12-30T14:36:40.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":23,"name":"171","parent_id":11,"created_at":"2022-12-31T11:12:33.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":24,"name":"172","parent_id":11,"created_at":"2022-12-31T11:13:26.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":25,"name":"1711","parent_id":23,"created_at":"2022-12-31T11:15:05.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":26,"name":"1712","parent_id":23,"created_at":"2022-12-31T11:15:10.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":27,"name":"3111","parent_id":18,"created_at":"2022-12-31T11:17:18.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":29,"name":"21-vo2...","parent_id":2,"created_at":"2022-12-31T22:38:13.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":6,"image_list":null,"_image_list":null,"has_child":0},{"id":30,"name":"32","parent_id":3,"created_at":"2023-01-06T11:14:15.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":31,"name":"A41","parent_id":9,"created_at":"2023-01-06T11:17:49.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":32,"name":"A42","parent_id":9,"created_at":"2023-01-06T11:20:48.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":34,"name":"132","parent_id":12,"created_at":"2023-01-06T13:10:27.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":35,"name":"133","parent_id":12,"created_at":"2023-01-06T13:48:20.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":36,"name":"134","parent_id":12,"created_at":"2023-01-06T14:01:50.000000Z","deleted_at":null,"orders":null,"child_type":0,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"/test_cloud_file?fid=2040&type=thumb","link":"/test_cloud_file?fid=2040"}],"has_child":1},{"id":38,"name":"A411","parent_id":31,"created_at":"2023-01-07T04:20:55.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2045","_image_list":[{"id":2045,"name":"girl8.jpg","thumb":"/test_cloud_file?fid=2045&type=thumb","link":"/test_cloud_file?fid=2045"}],"has_child":0},{"id":39,"name":"A412","parent_id":31,"created_at":"2023-01-07T04:48:59.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":41,"name":"1342","parent_id":36,"created_at":"2023-01-07T05:01:25.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2047&type=thumb","link":"/test_cloud_file?fid=2047"}],"has_child":0},{"id":43,"name":"1344","parent_id":36,"created_at":"2023-01-07T05:05:49.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"/test_cloud_file?fid=2049&type=thumb","link":"/test_cloud_file?fid=2049"}],"has_child":0},{"id":44,"name":"135","parent_id":12,"created_at":"2023-01-07T05:10:09.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2050&type=thumb","link":"/test_cloud_file?fid=2050"}],"has_child":0},{"id":60,"name":"A11","parent_id":1,"created_at":"2023-01-09T05:35:41.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":4,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":61,"name":"A12","parent_id":1,"created_at":"2023-01-09T05:35:51.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":63,"name":"151","parent_id":62,"created_at":"2023-01-09T09:09:29.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":64,"name":"v a13","parent_id":1,"created_at":"2023-01-09T11:00:05.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0},{"id":65,"name":"111","parent_id":62,"created_at":"2023-01-10T05:20:20.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":66,"name":"111","parent_id":15,"created_at":"2023-01-10T05:20:41.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":67,"name":"111","parent_id":11,"created_at":"2023-01-10T05:20:56.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":68,"name":"33","parent_id":15,"created_at":"2023-01-10T05:21:03.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":69,"name":"222","parent_id":12,"created_at":"2023-01-10T05:21:11.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":70,"name":"33","parent_id":11,"created_at":"2023-01-10T05:26:40.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0}]'
        let dataCheck = '[{"id":1,"name":"A1","parent_id":0,"created_at":"2022-12-30T03:01:23.000000Z","deleted_at":null,"orders":1112,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":0,"_col":5,"_divCont":{}},{"id":9,"name":"A4","parent_id":0,"created_at":"2022-12-30T03:40:02.000000Z","deleted_at":null,"orders":100,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":0,"_col":13,"_divCont":{}},{"id":11,"name":"17","parent_id":1,"created_at":"2022-12-30T08:53:29.000000Z","deleted_at":null,"orders":66,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":1,"_divCont":{}},{"id":8,"name":"A16","parent_id":1,"created_at":"2022-12-30T03:02:21.000000Z","deleted_at":null,"orders":65,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":3,"_divCont":{}},{"id":62,"name":"15","parent_id":1,"created_at":"2023-01-09T05:36:09.000000Z","deleted_at":null,"orders":64,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":4,"_divCont":{}},{"id":13,"name":"A1-Vo2","parent_id":0,"created_at":"2022-12-30T09:14:02.000000Z","deleted_at":null,"orders":51,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":6,"_divCont":{}},{"id":14,"name":"A1 Vo31","parent_id":0,"created_at":"2022-12-30T09:44:46.000000Z","deleted_at":null,"orders":50,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":7,"_divCont":{}},{"id":2,"name":"A2","parent_id":0,"created_at":"2022-12-30T03:01:26.000000Z","deleted_at":null,"orders":10,"child_type":2,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":0,"_col":16,"_divCont":{}},{"id":7,"name":"A22","parent_id":2,"created_at":"2022-12-30T03:02:14.000000Z","deleted_at":null,"orders":10,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":15,"_divCont":{}},{"id":15,"name":"14","parent_id":1,"created_at":"2022-12-30T12:16:15.000000Z","deleted_at":null,"orders":6,"child_type":null,"gender":null,"birthday":"","child_of_second_married":14,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":6,"_divCont":{}},{"id":4,"name":"A1-Vo1","parent_id":0,"created_at":"2022-12-30T03:01:42.000000Z","deleted_at":null,"orders":5,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":8,"_divCont":{}},{"id":12,"name":"A13","parent_id":1,"created_at":"2022-12-30T08:55:39.000000Z","deleted_at":null,"orders":4,"child_type":null,"gender":null,"birthday":"","child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":9,"_divCont":{}},{"id":3,"name":"A3","parent_id":0,"created_at":"2022-12-30T03:01:30.000000Z","deleted_at":null,"orders":null,"child_type":3,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1,"_row":0,"_col":19,"_divCont":{}},{"id":6,"name":"A21","parent_id":2,"created_at":"2022-12-30T03:02:10.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":1,"_col":16,"_divCont":{}},{"id":10,"name":"21 - Vo","parent_id":2,"created_at":"2022-12-30T03:45:12.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":6,"image_list":"","_image_list":null,"has_child":0,"_row":1,"_col":17,"_divCont":{}},{"id":17,"name":"31","parent_id":3,"created_at":"2022-12-30T13:57:13.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1,"_row":1,"_col":19,"_divCont":{}},{"id":18,"name":"311","parent_id":17,"created_at":"2022-12-30T14:36:15.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1,"_row":2,"_col":18,"_divCont":{}},{"id":19,"name":"312","parent_id":17,"created_at":"2022-12-30T14:36:19.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":20,"_divCont":{}},{"id":20,"name":"311-Vo","parent_id":17,"created_at":"2022-12-30T14:36:27.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":18,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":19,"_divCont":{}},{"id":21,"name":"221","parent_id":7,"created_at":"2022-12-30T14:36:36.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":15,"_divCont":{}},{"id":22,"name":"222","parent_id":7,"created_at":"2022-12-30T14:36:40.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":16,"_divCont":{}},{"id":23,"name":"171","parent_id":11,"created_at":"2022-12-31T11:12:33.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1,"_row":2,"_col":0,"_divCont":{}},{"id":24,"name":"172","parent_id":11,"created_at":"2022-12-31T11:13:26.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":1,"_divCont":{}},{"id":25,"name":"1711","parent_id":23,"created_at":"2022-12-31T11:15:05.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":3,"_col":0,"_divCont":{}},{"id":26,"name":"1712","parent_id":23,"created_at":"2022-12-31T11:15:10.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":3,"_col":1,"_divCont":{}},{"id":27,"name":"3111","parent_id":18,"created_at":"2022-12-31T11:17:18.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":3,"_col":18,"_divCont":{}},{"id":29,"name":"21-vo2...","parent_id":2,"created_at":"2022-12-31T22:38:13.000000Z","deleted_at":null,"orders":null,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":6,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":18,"_divCont":{}},{"id":30,"name":"32","parent_id":3,"created_at":"2023-01-06T11:14:15.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":1,"_col":20,"_divCont":{}},{"id":31,"name":"A41","parent_id":9,"created_at":"2023-01-06T11:17:49.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":13,"_divCont":{}},{"id":32,"name":"A42","parent_id":9,"created_at":"2023-01-06T11:20:48.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":14,"_divCont":{}},{"id":34,"name":"132","parent_id":12,"created_at":"2023-01-06T13:10:27.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":8,"_divCont":{}},{"id":35,"name":"133","parent_id":12,"created_at":"2023-01-06T13:48:20.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":9,"_divCont":{}},{"id":36,"name":"134","parent_id":12,"created_at":"2023-01-06T14:01:50.000000Z","deleted_at":null,"orders":null,"child_type":0,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"/test_cloud_file?fid=2040&type=thumb","link":"/test_cloud_file?fid=2040"}],"has_child":1,"_row":2,"_col":10,"_divCont":{}},{"id":38,"name":"A411","parent_id":31,"created_at":"2023-01-07T04:20:55.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2045","_image_list":[{"id":2045,"name":"girl8.jpg","thumb":"/test_cloud_file?fid=2045&type=thumb","link":"/test_cloud_file?fid=2045"}],"has_child":0,"_row":2,"_col":13,"_divCont":{}},{"id":39,"name":"A412","parent_id":31,"created_at":"2023-01-07T04:48:59.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":14,"_divCont":{}},{"id":41,"name":"1342","parent_id":36,"created_at":"2023-01-07T05:01:25.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2047&type=thumb","link":"/test_cloud_file?fid=2047"}],"has_child":0,"_row":3,"_col":10,"_divCont":{}},{"id":43,"name":"1344","parent_id":36,"created_at":"2023-01-07T05:05:49.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"/test_cloud_file?fid=2049&type=thumb","link":"/test_cloud_file?fid=2049"}],"has_child":0,"_row":3,"_col":11,"_divCont":{}},{"id":44,"name":"135","parent_id":12,"created_at":"2023-01-07T05:10:09.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2050&type=thumb","link":"/test_cloud_file?fid=2050"}],"has_child":0,"_row":2,"_col":11,"_divCont":{}},{"id":60,"name":"A11","parent_id":1,"created_at":"2023-01-09T05:35:41.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":4,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":11,"_divCont":{}},{"id":61,"name":"A12","parent_id":1,"created_at":"2023-01-09T05:35:51.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":12,"_divCont":{}},{"id":63,"name":"151","parent_id":62,"created_at":"2023-01-09T09:09:29.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":4,"_divCont":{}},{"id":64,"name":"v a13","parent_id":1,"created_at":"2023-01-09T11:00:05.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":10,"_divCont":{}},{"id":65,"name":"111","parent_id":62,"created_at":"2023-01-10T05:20:20.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":5,"_divCont":{}},{"id":66,"name":"111","parent_id":15,"created_at":"2023-01-10T05:20:41.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":6,"_divCont":{}},{"id":67,"name":"111","parent_id":11,"created_at":"2023-01-10T05:20:56.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":2,"_divCont":{}},{"id":68,"name":"33","parent_id":15,"created_at":"2023-01-10T05:21:03.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":7,"_divCont":{}},{"id":69,"name":"222","parent_id":12,"created_at":"2023-01-10T05:21:11.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":12,"_divCont":{}},{"id":70,"name":"33","parent_id":11,"created_at":"2023-01-10T05:26:40.000000Z","deleted_at":null,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":3,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        svg1.setPid = 1
        data = '[{"id":1,"name":"A1","parent_id":0,"orders":1112,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":9,"name":"A4","parent_id":0,"orders":100,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":11,"name":"17","parent_id":1,"orders":66,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":8,"name":"A16","parent_id":1,"orders":65,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":62,"name":"15","parent_id":1,"orders":64,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":4,"name":"A1-Vo1","parent_id":0,"orders":52,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":13,"name":"A1-Vo2","parent_id":0,"orders":51,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":14,"name":"A1 Vo31","parent_id":0,"orders":50,"child_type":1,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0},{"id":2,"name":"A2","parent_id":0,"orders":10,"child_type":2,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":15,"name":"14","parent_id":1,"orders":6,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":14,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":12,"name":"A13","parent_id":1,"orders":4,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":3,"name":"A3","parent_id":0,"orders":null,"child_type":3,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":23,"name":"171","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1},{"id":24,"name":"172","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":25,"name":"1711","parent_id":23,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":26,"name":"1712","parent_id":23,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2059","_image_list":[{"id":2059,"name":"girl3.jpg","thumb":"\/test_cloud_file?fid=2059&type=thumb","link":"\/test_cloud_file?fid=2059"}],"has_child":0},{"id":34,"name":"132","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":35,"name":"133","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":36,"name":"134","parent_id":12,"orders":null,"child_type":0,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"\/test_cloud_file?fid=2040&type=thumb","link":"\/test_cloud_file?fid=2040"}],"has_child":1},{"id":41,"name":"1342","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2047&type=thumb","link":"\/test_cloud_file?fid=2047"}],"has_child":0},{"id":43,"name":"1344","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"\/test_cloud_file?fid=2049&type=thumb","link":"\/test_cloud_file?fid=2049"}],"has_child":0},{"id":44,"name":"135","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2050&type=thumb","link":"\/test_cloud_file?fid=2050"}],"has_child":0},{"id":60,"name":"A11","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":4,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":61,"name":"A12","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":63,"name":"151","parent_id":62,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":64,"name":"v a13","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0},{"id":65,"name":"111","parent_id":62,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":66,"name":"111","parent_id":15,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":67,"name":"111","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":68,"name":"33","parent_id":15,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":69,"name":"222","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":70,"name":"33","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":77,"name":"66","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":78,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":79,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":80,"name":"123","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":78,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":81,"name":"333","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":79,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0}]'
        dataCheck = '[{"id":1,"name":"A1","parent_id":0,"orders":1112,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":0,"_col":6,"_divCont":{}},{"id":11,"name":"17","parent_id":1,"orders":66,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":1,"_divCont":{}},{"id":8,"name":"A16","parent_id":1,"orders":65,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":3,"_divCont":{}},{"id":62,"name":"15","parent_id":1,"orders":64,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":4,"_divCont":{}},{"id":4,"name":"A1-Vo1","parent_id":0,"orders":52,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":7,"_divCont":{}},{"id":13,"name":"A1-Vo2","parent_id":0,"orders":51,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":8,"_divCont":{}},{"id":14,"name":"A1 Vo31","parent_id":0,"orders":50,"child_type":1,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":1,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":9,"_divCont":{}},{"id":15,"name":"14","parent_id":1,"orders":6,"child_type":null,"gender":null,"birthday":"","child_of_second_married":14,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":6,"_divCont":{}},{"id":12,"name":"A13","parent_id":1,"orders":4,"child_type":null,"gender":null,"birthday":"","child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":1,"_col":11,"_divCont":{}},{"id":23,"name":"171","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":1,"_row":2,"_col":0,"_divCont":{}},{"id":24,"name":"172","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":1,"_divCont":{}},{"id":25,"name":"1711","parent_id":23,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":3,"_col":0,"_divCont":{}},{"id":26,"name":"1712","parent_id":23,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2059","_image_list":[{"id":2059,"name":"girl3.jpg","thumb":"\/test_cloud_file?fid=2059&type=thumb","link":"\/test_cloud_file?fid=2059"}],"has_child":0,"_row":3,"_col":1,"_divCont":{}},{"id":34,"name":"132","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":8,"_divCont":{}},{"id":35,"name":"133","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":2,"_col":9,"_divCont":{}},{"id":36,"name":"134","parent_id":12,"orders":null,"child_type":0,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"\/test_cloud_file?fid=2040&type=thumb","link":"\/test_cloud_file?fid=2040"}],"has_child":1,"_row":2,"_col":10,"_divCont":{}},{"id":41,"name":"1342","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2047&type=thumb","link":"\/test_cloud_file?fid=2047"}],"has_child":0,"_row":3,"_col":10,"_divCont":{}},{"id":43,"name":"1344","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"\/test_cloud_file?fid=2049&type=thumb","link":"\/test_cloud_file?fid=2049"}],"has_child":0,"_row":3,"_col":11,"_divCont":{}},{"id":44,"name":"135","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2050&type=thumb","link":"\/test_cloud_file?fid=2050"}],"has_child":0,"_row":2,"_col":14,"_divCont":{}},{"id":60,"name":"A11","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":4,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":13,"_divCont":{}},{"id":61,"name":"A12","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":14,"_divCont":{}},{"id":63,"name":"151","parent_id":62,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":4,"_divCont":{}},{"id":64,"name":"v a13","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":12,"_divCont":{}},{"id":65,"name":"111","parent_id":62,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":5,"_divCont":{}},{"id":66,"name":"111","parent_id":15,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":6,"_divCont":{}},{"id":67,"name":"111","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":2,"_divCont":{}},{"id":68,"name":"33","parent_id":15,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":7,"_divCont":{}},{"id":69,"name":"222","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":15,"_divCont":{}},{"id":70,"name":"33","parent_id":11,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":3,"_divCont":{}},{"id":77,"name":"66","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":11,"_divCont":{}},{"id":78,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":12,"_divCont":{}},{"id":79,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":13,"_divCont":{}},{"id":80,"name":"123","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":78,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":3,"_col":12,"_divCont":{}},{"id":81,"name":"333","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":79,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":3,"_col":13,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        data = '[{"id":11,"name":"17","parent_id":1,"orders":66,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":8,"name":"A16","parent_id":1,"orders":65,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":62,"name":"15","parent_id":1,"orders":64,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":15,"name":"14","parent_id":1,"orders":6,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":14,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":12,"name":"A13","parent_id":1,"orders":4,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1},{"id":34,"name":"132","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":35,"name":"133","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0},{"id":36,"name":"134","parent_id":12,"orders":null,"child_type":0,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"\/test_cloud_file?fid=2040&type=thumb","link":"\/test_cloud_file?fid=2040"}],"has_child":1},{"id":41,"name":"1342","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2047&type=thumb","link":"\/test_cloud_file?fid=2047"}],"has_child":0},{"id":43,"name":"1344","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"\/test_cloud_file?fid=2049&type=thumb","link":"\/test_cloud_file?fid=2049"}],"has_child":0},{"id":44,"name":"135","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"\/test_cloud_file?fid=2050&type=thumb","link":"\/test_cloud_file?fid=2050"}],"has_child":0},{"id":60,"name":"A11","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":4,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":61,"name":"A12","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":64,"name":"v a13","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0},{"id":69,"name":"222","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":77,"name":"66","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":78,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":79,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0},{"id":80,"name":"123","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":78,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0},{"id":81,"name":"333","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":null,"child_of_second_married":79,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0}]'
        svg1.setPid = 12
        dataCheck = '[{"id":12,"name":"A13","parent_id":1,"orders":4,"child_type":null,"gender":null,"birthday":"","child_of_second_married":13,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":1,"_row":0,"_col":3,"_divCont":{}},{"id":34,"name":"132","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":1,"_col":0,"_divCont":{}},{"id":35,"name":"133","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"","_image_list":null,"has_child":0,"_row":1,"_col":1,"_divCont":{}},{"id":36,"name":"134","parent_id":12,"orders":null,"child_type":0,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2040","_image_list":[{"id":2040,"name":"girl1.jpg","thumb":"/test_cloud_file?fid=2040&type=thumb","link":"/test_cloud_file?fid=2040"}],"has_child":1,"_row":1,"_col":2,"_divCont":{}},{"id":41,"name":"1342","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2047","_image_list":[{"id":2047,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2047&type=thumb","link":"/test_cloud_file?fid=2047"}],"has_child":0,"_row":2,"_col":2,"_divCont":{}},{"id":43,"name":"1344","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2049","_image_list":[{"id":2049,"name":"girl9.jpg","thumb":"/test_cloud_file?fid=2049&type=thumb","link":"/test_cloud_file?fid=2049"}],"has_child":0,"_row":2,"_col":3,"_divCont":{}},{"id":44,"name":"135","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":"2050","_image_list":[{"id":2050,"name":"girl10.jpg","thumb":"/test_cloud_file?fid=2050&type=thumb","link":"/test_cloud_file?fid=2050"}],"has_child":0,"_row":1,"_col":6,"_divCont":{}},{"id":64,"name":"v a13","parent_id":1,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":12,"image_list":null,"_image_list":null,"has_child":0,"_row":0,"_col":4,"_divCont":{}},{"id":69,"name":"222","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":7,"_divCont":{}},{"id":77,"name":"66","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":3,"_divCont":{}},{"id":78,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":4,"_divCont":{}},{"id":79,"name":"99","parent_id":12,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":null,"status":1,"last_name":null,"sur_name":null,"married_with":36,"image_list":null,"_image_list":null,"has_child":0,"_row":1,"_col":5,"_divCont":{}},{"id":80,"name":"123","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":78,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":4,"_divCont":{}},{"id":81,"name":"333","parent_id":36,"orders":null,"child_type":null,"gender":null,"birthday":"","child_of_second_married":79,"status":1,"last_name":null,"sur_name":null,"married_with":null,"image_list":null,"_image_list":null,"has_child":0,"_row":2,"_col":5,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        data = '[ { "id": 2, "parent_id": 0, "name": "C\u1ee5 L\u00ea V\u0103n T\u00e1", "birthday": "" }, { "id": 5, "parent_id": 2, "name": "Le Van Mien", "married_with": null, "birthday": "", "orders": 4, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 11, "parent_id": 5, "name": "Le Thi Ngo", "married_with": null, "birthday": "", "orders": 4, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 10, "parent_id": 5, "name": "Nguyen Huu Trieu", "married_with": 11, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 152, "parent_id": 11, "name": "Nguyen Huu Ninh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 153, "parent_id": 11, "name": "Nguyen Thi Binh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 160, "parent_id": 11, "name": "Hoang Vinh", "married_with": 153, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 248, "parent_id": 153, "name": "Hoang Thi Thu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 252, "parent_id": 153, "name": "Le Xuan Hung", "married_with": 248, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 311, "parent_id": 248, "name": "Le Nhat Chi", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 249, "parent_id": 153, "name": "Hoang Thi Thuyen", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 310, "parent_id": 153, "name": "Mai Van Quy", "married_with": 249, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 318, "parent_id": 249, "name": "Mai Anh Quang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 319, "parent_id": 249, "name": "Mai Ngoc Chi", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 250, "parent_id": 153, "name": "Hoang Thi Thanh Tho", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 251, "parent_id": 153, "name": "Hoang Thi Yen", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 154, "parent_id": 11, "name": "Nguyen Huu Kien", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 161, "parent_id": 11, "name": "Nguyen Thi Hong", "married_with": 154, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 253, "parent_id": 154, "name": "Nguyen Huu Thanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 312, "parent_id": 154, "name": "Thieu Hoai Thu", "married_with": 253, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 313, "parent_id": 253, "name": "Nguyen Huu Lan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 254, "parent_id": 154, "name": "Nguyen Huu Thang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 314, "parent_id": 154, "name": "Cao Thi Hoai Nam", "married_with": 254, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 155, "parent_id": 11, "name": "Nguyen Thi Nhan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 162, "parent_id": 11, "name": "Le Ba Ngoc", "married_with": 155, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 255, "parent_id": 155, "name": "Le Ngoc Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 256, "parent_id": 155, "name": "Le Anh Viet Tu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 156, "parent_id": 11, "name": "Nguyen Thi Phuong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 164, "parent_id": 11, "name": "Nguyen The Vinh", "married_with": 156, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 257, "parent_id": 156, "name": "Nguyen Phuong Uyen", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 258, "parent_id": 156, "name": "Nguyen The Nam", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 157, "parent_id": 11, "name": "Nguyen Thi Lien", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 166, "parent_id": 11, "name": "Le Van Thai", "married_with": 157, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 167, "parent_id": 11, "name": "Nguyen Hai Dang", "married_with": 157, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 259, "parent_id": 157, "name": "Le Phuong Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 158, "parent_id": 11, "name": "Nguyen Thi Hien", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 260, "parent_id": 158, "name": "Nguyen Thi Hoa", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 159, "parent_id": 11, "name": "Nguyen Huu Hung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 169, "parent_id": 11, "name": "Le Thi Nguyen", "married_with": 159, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 261, "parent_id": 159, "name": "Nguyen Thi Dung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 262, "parent_id": 159, "name": "Nguyen Huu Dang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 12, "parent_id": 5, "name": "Le Van Minh", "married_with": null, "birthday": "1930", "orders": 3, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 21, "parent_id": 12, "name": "Le Minh Chinh", "married_with": null, "birthday": "1951", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 25, "parent_id": 12, "name": "Tran Thi Tuyet Trinh", "married_with": 21, "birthday": "1949", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 225, "parent_id": 21, "name": "Le Quynh Trang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 228, "parent_id": 21, "name": "Luong Sy Hai", "married_with": 225, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 234, "parent_id": 225, "name": "Luong Truong Sinh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 235, "parent_id": 225, "name": "Luong Bao Ngan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 226, "parent_id": 21, "name": "Le Quynh Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 229, "parent_id": 21, "name": "Pham Hong Duong", "married_with": 226, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 232, "parent_id": 226, "name": "Pham Quynh Le", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 233, "parent_id": 226, "name": "Pham Hong Nam", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 227, "parent_id": 21, "name": "Le Anh Dung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 230, "parent_id": 21, "name": "Nguyen Thi Van Anh", "married_with": 227, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 231, "parent_id": 227, "name": "Le Thanh Hai My", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 305, "parent_id": 227, "name": "Le Hoang Dieu Linh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 22, "parent_id": 12, "name": "Le Thi Xuan", "married_with": null, "birthday": "1958", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 26, "parent_id": 12, "name": "Nguyen Huu Thanh", "married_with": 22, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 236, "parent_id": 22, "name": "Nguyen Thi Mai", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 238, "parent_id": 22, "name": "Vu Xuan Truong", "married_with": 236, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 274, "parent_id": 236, "name": "Vu Truong Phu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 275, "parent_id": 236, "name": "Vu Thi Thao Nguyen", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 237, "parent_id": 22, "name": "Nguyen Anh Tien", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 276, "parent_id": 22, "name": "Le Thi Luong", "married_with": 237, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 277, "parent_id": 237, "name": "Nguyen Gia Bao", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 315, "parent_id": 237, "name": "Nguyen Bao Long", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 23, "parent_id": 12, "name": "Le Thi Huong", "married_with": null, "birthday": "1963", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 27, "parent_id": 12, "name": "Le Quoc Hung", "married_with": 23, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 239, "parent_id": 23, "name": "Le Van Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 241, "parent_id": 23, "name": "Nguyen Ngoc Hop", "married_with": 239, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 273, "parent_id": 239, "name": "Nguyen Ngoc Phuc", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 240, "parent_id": 23, "name": "Le Tuan Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 316, "parent_id": 23, "name": "Cao Thi Anh", "married_with": 240, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 317, "parent_id": 240, "name": "Le Thuy Duong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 24, "parent_id": 12, "name": "Le Nam Chinh", "married_with": null, "birthday": "1966", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 28, "parent_id": 12, "name": "Dang Thu Huong", "married_with": 24, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 242, "parent_id": 24, "name": "Le Dang Ha Thanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 243, "parent_id": 24, "name": "Le Dang Nhat Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 13, "parent_id": 5, "name": "Le Thoa", "married_with": 12, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 14, "parent_id": 5, "name": "Le Van Tu", "married_with": null, "birthday": "1934", "orders": 2, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 15, "parent_id": 5, "name": "La Thi Mau", "married_with": 14, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 16, "parent_id": 5, "name": "Le Thi Chin", "married_with": 14, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 29, "parent_id": 14, "name": "Le Thi Mong Thu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 30, "parent_id": 14, "name": "Le Huy Duong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 31, "parent_id": 14, "name": "Pham Thi Yen", "married_with": 30, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 246, "parent_id": 30, "name": "Le Thang Long", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 247, "parent_id": 30, "name": "Le Thang Quang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 32, "parent_id": 14, "name": "Le Nam Thang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 33, "parent_id": 14, "name": "Vu Thi Hoai Theu", "married_with": 32, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 244, "parent_id": 32, "name": "Le Vu Quynh Mai", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 245, "parent_id": 32, "name": "Le Vu Thuc Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 17, "parent_id": 5, "name": "Le Van Suu", "married_with": null, "birthday": "1937", "orders": 1, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 18, "parent_id": 5, "name": "Le Thi Truc", "married_with": 17, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 19, "parent_id": 5, "name": "Hoang Viet Hang", "married_with": 17, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 34, "parent_id": 17, "name": "Le Chi Hai", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 35, "parent_id": 17, "name": "Khuong Thi Cuong", "married_with": 34, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 263, "parent_id": 34, "name": "Le Duc Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 265, "parent_id": 34, "name": "Hoang Thi Huong", "married_with": 263, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 272, "parent_id": 263, "name": "Le Hoang Anh Vu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 306, "parent_id": 34, "name": "Bui Thi Ha Huong", "married_with": 263, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 307, "parent_id": 263, "name": "Le Anh Quan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 264, "parent_id": 34, "name": "Le Duc Tung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 308, "parent_id": 34, "name": "Pham Thi Hien", "married_with": 264, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 37, "parent_id": 17, "name": "Le Thi Ly", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 36, "parent_id": 17, "name": "Nguyen Van Chi", "married_with": 37, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 266, "parent_id": 37, "name": "Nguyen Huong Tra", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 267, "parent_id": 37, "name": "Nguyen Chi Phuong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 268, "parent_id": 37, "name": "Nguyen Tu Nhi", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 39, "parent_id": 17, "name": "Le Thi Ha", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 38, "parent_id": 17, "name": "Nguyen Van Dat", "married_with": 39, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 269, "parent_id": 39, "name": "Nguyen Ha Khanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 270, "parent_id": 39, "name": "Nguyen Ha Khanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 40, "parent_id": 17, "name": "Le Van Nga", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 41, "parent_id": 17, "name": "Nguyen Ha Thai", "married_with": 40, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 271, "parent_id": 40, "name": "Le Duy Long", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 309, "parent_id": 40, "name": "Le Bao Chau", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 42, "parent_id": 17, "name": "Le Minh Sam", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 19, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 9, "parent_id": 2, "name": "Nguyen Thi Von", "married_with": 5, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 4, "parent_id": 2, "name": "Le Van Trien", "married_with": null, "birthday": "", "orders": 3, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 7, "parent_id": 2, "name": "Le Thi Mien", "married_with": null, "birthday": "", "orders": 2, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 6, "parent_id": 2, "name": "Le Thi Duyen", "married_with": null, "birthday": "", "orders": 1, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 3, "parent_id": 0, "name": "Duong Thi Diem", "married_with": 2, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null } ]'
        svg1.setPid = null
        dataCheck = '[{"id":2,"parent_id":0,"name":"Cụ Lê Văn Tá","birthday":"","_row":0,"_col":29,"_divCont":{}},{"id":5,"parent_id":2,"name":"Le Van Mien","married_with":null,"birthday":"","orders":4,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":28,"_divCont":{}},{"id":11,"parent_id":5,"name":"Le Thi Ngo","married_with":null,"birthday":"","orders":4,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":2,"_col":9,"_divCont":{}},{"id":12,"parent_id":5,"name":"Le Van Minh","married_with":null,"birthday":"1930","orders":3,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":2,"_col":28,"_divCont":{}},{"id":4,"parent_id":2,"name":"Le Van Trien","married_with":null,"birthday":"","orders":3,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":30,"_divCont":{}},{"id":14,"parent_id":5,"name":"Le Van Tu","married_with":null,"birthday":"1934","orders":2,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":2,"_col":37,"_divCont":{}},{"id":7,"parent_id":2,"name":"Le Thi Mien","married_with":null,"birthday":"","orders":2,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":31,"_divCont":{}},{"id":17,"parent_id":5,"name":"Le Van Suu","married_with":null,"birthday":"1937","orders":1,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":2,"_col":46,"_divCont":{}},{"id":6,"parent_id":2,"name":"Le Thi Duyen","married_with":null,"birthday":"","orders":1,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":32,"_divCont":{}},{"id":10,"parent_id":5,"name":"Nguyen Huu Trieu","married_with":11,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":10,"_divCont":{}},{"id":152,"parent_id":11,"name":"Nguyen Huu Ninh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":1,"_divCont":{}},{"id":153,"parent_id":11,"name":"Nguyen Thi Binh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":2,"_divCont":{}},{"id":160,"parent_id":11,"name":"Hoang Vinh","married_with":153,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":3,"_divCont":{}},{"id":248,"parent_id":153,"name":"Hoang Thi Thu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":0,"_divCont":{}},{"id":252,"parent_id":153,"name":"Le Xuan Hung","married_with":248,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":1,"_divCont":{}},{"id":311,"parent_id":248,"name":"Le Nhat Chi","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":0,"_divCont":{}},{"id":249,"parent_id":153,"name":"Hoang Thi Thuyen","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":2,"_divCont":{}},{"id":310,"parent_id":153,"name":"Mai Van Quy","married_with":249,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":3,"_divCont":{}},{"id":318,"parent_id":249,"name":"Mai Anh Quang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":2,"_divCont":{}},{"id":319,"parent_id":249,"name":"Mai Ngoc Chi","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":3,"_divCont":{}},{"id":250,"parent_id":153,"name":"Hoang Thi Thanh Tho","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":4,"_divCont":{}},{"id":251,"parent_id":153,"name":"Hoang Thi Yen","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":5,"_divCont":{}},{"id":154,"parent_id":11,"name":"Nguyen Huu Kien","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":7,"_divCont":{}},{"id":161,"parent_id":11,"name":"Nguyen Thi Hong","married_with":154,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":8,"_divCont":{}},{"id":253,"parent_id":154,"name":"Nguyen Huu Thanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":6,"_divCont":{}},{"id":312,"parent_id":154,"name":"Thieu Hoai Thu","married_with":253,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":7,"_divCont":{}},{"id":313,"parent_id":253,"name":"Nguyen Huu Lan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":6,"_divCont":{}},{"id":254,"parent_id":154,"name":"Nguyen Huu Thang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":8,"_divCont":{}},{"id":314,"parent_id":154,"name":"Cao Thi Hoai Nam","married_with":254,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":9,"_divCont":{}},{"id":155,"parent_id":11,"name":"Nguyen Thi Nhan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":10,"_divCont":{}},{"id":162,"parent_id":11,"name":"Le Ba Ngoc","married_with":155,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":11,"_divCont":{}},{"id":255,"parent_id":155,"name":"Le Ngoc Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":10,"_divCont":{}},{"id":256,"parent_id":155,"name":"Le Anh Viet Tu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":11,"_divCont":{}},{"id":156,"parent_id":11,"name":"Nguyen Thi Phuong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":12,"_divCont":{}},{"id":164,"parent_id":11,"name":"Nguyen The Vinh","married_with":156,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":13,"_divCont":{}},{"id":257,"parent_id":156,"name":"Nguyen Phuong Uyen","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":12,"_divCont":{}},{"id":258,"parent_id":156,"name":"Nguyen The Nam","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":13,"_divCont":{}},{"id":157,"parent_id":11,"name":"Nguyen Thi Lien","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":14,"_divCont":{}},{"id":166,"parent_id":11,"name":"Le Van Thai","married_with":157,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":15,"_divCont":{}},{"id":167,"parent_id":11,"name":"Nguyen Hai Dang","married_with":157,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":16,"_divCont":{}},{"id":259,"parent_id":157,"name":"Le Phuong Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":4,"_col":14,"_divCont":{}},{"id":158,"parent_id":11,"name":"Nguyen Thi Hien","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":17,"_divCont":{}},{"id":260,"parent_id":158,"name":"Nguyen Thi Hoa","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":17,"_divCont":{}},{"id":159,"parent_id":11,"name":"Nguyen Huu Hung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":18,"_divCont":{}},{"id":169,"parent_id":11,"name":"Le Thi Nguyen","married_with":159,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":19,"_divCont":{}},{"id":261,"parent_id":159,"name":"Nguyen Thi Dung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":18,"_divCont":{}},{"id":262,"parent_id":159,"name":"Nguyen Huu Dang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":19,"_divCont":{}},{"id":21,"parent_id":12,"name":"Le Minh Chinh","married_with":null,"birthday":"1951","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":22,"_divCont":{}},{"id":25,"parent_id":12,"name":"Tran Thi Tuyet Trinh","married_with":21,"birthday":"1949","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":3,"_col":23,"_divCont":{}},{"id":225,"parent_id":21,"name":"Le Quynh Trang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":20,"_divCont":{}},{"id":228,"parent_id":21,"name":"Luong Sy Hai","married_with":225,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":21,"_divCont":{}},{"id":234,"parent_id":225,"name":"Luong Truong Sinh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":20,"_divCont":{}},{"id":235,"parent_id":225,"name":"Luong Bao Ngan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":21,"_divCont":{}},{"id":226,"parent_id":21,"name":"Le Quynh Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":22,"_divCont":{}},{"id":229,"parent_id":21,"name":"Pham Hong Duong","married_with":226,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":23,"_divCont":{}},{"id":232,"parent_id":226,"name":"Pham Quynh Le","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":22,"_divCont":{}},{"id":233,"parent_id":226,"name":"Pham Hong Nam","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":23,"_divCont":{}},{"id":227,"parent_id":21,"name":"Le Anh Dung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":24,"_divCont":{}},{"id":230,"parent_id":21,"name":"Nguyen Thi Van Anh","married_with":227,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":25,"_divCont":{}},{"id":231,"parent_id":227,"name":"Le Thanh Hai My","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":5,"_col":24,"_divCont":{}},{"id":305,"parent_id":227,"name":"Le Hoang Dieu Linh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":25,"_divCont":{}},{"id":22,"parent_id":12,"name":"Le Thi Xuan","married_with":null,"birthday":"1958","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":27,"_divCont":{}},{"id":26,"parent_id":12,"name":"Nguyen Huu Thanh","married_with":22,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":28,"_divCont":{}},{"id":236,"parent_id":22,"name":"Nguyen Thi Mai","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":26,"_divCont":{}},{"id":238,"parent_id":22,"name":"Vu Xuan Truong","married_with":236,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":27,"_divCont":{}},{"id":274,"parent_id":236,"name":"Vu Truong Phu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":26,"_divCont":{}},{"id":275,"parent_id":236,"name":"Vu Thi Thao Nguyen","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":27,"_divCont":{}},{"id":237,"parent_id":22,"name":"Nguyen Anh Tien","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":28,"_divCont":{}},{"id":276,"parent_id":22,"name":"Le Thi Luong","married_with":237,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":29,"_divCont":{}},{"id":277,"parent_id":237,"name":"Nguyen Gia Bao","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":28,"_divCont":{}},{"id":315,"parent_id":237,"name":"Nguyen Bao Long","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":29,"_divCont":{}},{"id":23,"parent_id":12,"name":"Le Thi Huong","married_with":null,"birthday":"1963","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":31,"_divCont":{}},{"id":27,"parent_id":12,"name":"Le Quoc Hung","married_with":23,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":32,"_divCont":{}},{"id":239,"parent_id":23,"name":"Le Van Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":30,"_divCont":{}},{"id":241,"parent_id":23,"name":"Nguyen Ngoc Hop","married_with":239,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":31,"_divCont":{}},{"id":273,"parent_id":239,"name":"Nguyen Ngoc Phuc","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":30,"_divCont":{}},{"id":240,"parent_id":23,"name":"Le Tuan Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":32,"_divCont":{}},{"id":316,"parent_id":23,"name":"Cao Thi Anh","married_with":240,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":33,"_divCont":{}},{"id":317,"parent_id":240,"name":"Le Thuy Duong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":32,"_divCont":{}},{"id":24,"parent_id":12,"name":"Le Nam Chinh","married_with":null,"birthday":"1966","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":34,"_divCont":{}},{"id":28,"parent_id":12,"name":"Dang Thu Huong","married_with":24,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":35,"_divCont":{}},{"id":242,"parent_id":24,"name":"Le Dang Ha Thanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":34,"_divCont":{}},{"id":243,"parent_id":24,"name":"Le Dang Nhat Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":35,"_divCont":{}},{"id":13,"parent_id":5,"name":"Le Thoa","married_with":12,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":29,"_divCont":{}},{"id":15,"parent_id":5,"name":"La Thi Mau","married_with":14,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":38,"_divCont":{}},{"id":16,"parent_id":5,"name":"Le Thi Chin","married_with":14,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":39,"_divCont":{}},{"id":29,"parent_id":14,"name":"Le Thi Mong Thu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":36,"_divCont":{}},{"id":30,"parent_id":14,"name":"Le Huy Duong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":37,"_divCont":{}},{"id":31,"parent_id":14,"name":"Pham Thi Yen","married_with":30,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":38,"_divCont":{}},{"id":246,"parent_id":30,"name":"Le Thang Long","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":37,"_divCont":{}},{"id":247,"parent_id":30,"name":"Le Thang Quang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":38,"_divCont":{}},{"id":32,"parent_id":14,"name":"Le Nam Thang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":39,"_divCont":{}},{"id":33,"parent_id":14,"name":"Vu Thi Hoai Theu","married_with":32,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":40,"_divCont":{}},{"id":244,"parent_id":32,"name":"Le Vu Quynh Mai","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":39,"_divCont":{}},{"id":245,"parent_id":32,"name":"Le Vu Thuc Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":40,"_divCont":{}},{"id":18,"parent_id":5,"name":"Le Thi Truc","married_with":17,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":2,"_col":47,"_divCont":{}},{"id":19,"parent_id":5,"name":"Hoang Viet Hang","married_with":17,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":2,"_col":48,"_divCont":{}},{"id":34,"parent_id":17,"name":"Le Chi Hai","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":42,"_divCont":{}},{"id":35,"parent_id":17,"name":"Khuong Thi Cuong","married_with":34,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":43,"_divCont":{}},{"id":263,"parent_id":34,"name":"Le Duc Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":41,"_divCont":{}},{"id":265,"parent_id":34,"name":"Hoang Thi Huong","married_with":263,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":42,"_divCont":{}},{"id":272,"parent_id":263,"name":"Le Hoang Anh Vu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":41,"_divCont":{}},{"id":306,"parent_id":34,"name":"Bui Thi Ha Huong","married_with":263,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":43,"_divCont":{}},{"id":307,"parent_id":263,"name":"Le Anh Quan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":5,"_col":42,"_divCont":{}},{"id":264,"parent_id":34,"name":"Le Duc Tung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":44,"_divCont":{}},{"id":308,"parent_id":34,"name":"Pham Thi Hien","married_with":264,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":4,"_col":45,"_divCont":{}},{"id":37,"parent_id":17,"name":"Le Thi Ly","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":46,"_divCont":{}},{"id":36,"parent_id":17,"name":"Nguyen Van Chi","married_with":37,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":47,"_divCont":{}},{"id":266,"parent_id":37,"name":"Nguyen Huong Tra","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":46,"_divCont":{}},{"id":267,"parent_id":37,"name":"Nguyen Chi Phuong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":47,"_divCont":{}},{"id":268,"parent_id":37,"name":"Nguyen Tu Nhi","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":48,"_divCont":{}},{"id":39,"parent_id":17,"name":"Le Thi Ha","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":49,"_divCont":{}},{"id":38,"parent_id":17,"name":"Nguyen Van Dat","married_with":39,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":50,"_divCont":{}},{"id":269,"parent_id":39,"name":"Nguyen Ha Khanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":49,"_divCont":{}},{"id":270,"parent_id":39,"name":"Nguyen Ha Khanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":50,"_divCont":{}},{"id":40,"parent_id":17,"name":"Le Van Nga","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":51,"_divCont":{}},{"id":41,"parent_id":17,"name":"Nguyen Ha Thai","married_with":40,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":3,"_col":52,"_divCont":{}},{"id":271,"parent_id":40,"name":"Le Duy Long","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":51,"_divCont":{}},{"id":309,"parent_id":40,"name":"Le Bao Chau","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":4,"_col":52,"_divCont":{}},{"id":42,"parent_id":17,"name":"Le Minh Sam","married_with":null,"birthday":"","orders":0,"child_of_second_married":19,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":53,"_divCont":{}},{"id":9,"parent_id":2,"name":"Nguyen Thi Von","married_with":5,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":1,"_col":29,"_divCont":{}},{"id":3,"parent_id":0,"name":"Duong Thi Diem","married_with":2,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":0,"_col":30,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        data = '[ { "id": "12", "parent_id": 0, "name": "L\u00ea V\u0103n Minh", "birthday": "1930" }, { "id": 21, "parent_id": 12, "name": "Le Minh Chinh", "married_with": null, "birthday": "1951", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 25, "parent_id": 12, "name": "Tran Thi Tuyet Trinh", "married_with": 21, "birthday": "1949", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 225, "parent_id": 21, "name": "Le Quynh Trang", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 228, "parent_id": 21, "name": "Luong Sy Hai", "married_with": 225, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 234, "parent_id": 225, "name": "Luong Truong Sinh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 235, "parent_id": 225, "name": "Luong Bao Ngan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 226, "parent_id": 21, "name": "Le Quynh Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 229, "parent_id": 21, "name": "Pham Hong Duong", "married_with": 226, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 232, "parent_id": 226, "name": "Pham Quynh Le", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 233, "parent_id": 226, "name": "Pham Hong Nam", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 227, "parent_id": 21, "name": "Le Anh Dung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 230, "parent_id": 21, "name": "Nguyen Thi Van Anh", "married_with": 227, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 231, "parent_id": 227, "name": "Le Thanh Hai My", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 305, "parent_id": 227, "name": "Le Hoang Dieu Linh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 22, "parent_id": 12, "name": "Le Thi Xuan", "married_with": null, "birthday": "1958", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 26, "parent_id": 12, "name": "Nguyen Huu Thanh", "married_with": 22, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 236, "parent_id": 22, "name": "Nguyen Thi Mai", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 238, "parent_id": 22, "name": "Vu Xuan Truong", "married_with": 236, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 274, "parent_id": 236, "name": "Vu Truong Phu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 275, "parent_id": 236, "name": "Vu Thi Thao Nguyen", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 237, "parent_id": 22, "name": "Nguyen Anh Tien", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 276, "parent_id": 22, "name": "Le Thi Luong", "married_with": 237, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 277, "parent_id": 237, "name": "Nguyen Gia Bao", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 315, "parent_id": 237, "name": "Nguyen Bao Long", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 23, "parent_id": 12, "name": "Le Thi Huong", "married_with": null, "birthday": "1963", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 27, "parent_id": 12, "name": "Le Quoc Hung", "married_with": 23, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 239, "parent_id": 23, "name": "Le Van Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 241, "parent_id": 23, "name": "Nguyen Ngoc Hop", "married_with": 239, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 273, "parent_id": 239, "name": "Nguyen Ngoc Phuc", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 240, "parent_id": 23, "name": "Le Tuan Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 316, "parent_id": 23, "name": "Cao Thi Anh", "married_with": 240, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 317, "parent_id": 240, "name": "Le Thuy Duong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 24, "parent_id": 12, "name": "Le Nam Chinh", "married_with": null, "birthday": "1966", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 28, "parent_id": 12, "name": "Dang Thu Huong", "married_with": 24, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 242, "parent_id": 24, "name": "Le Dang Ha Thanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 243, "parent_id": 24, "name": "Le Dang Nhat Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 13, "parent_id": 5, "name": "Le Thoa", "married_with": 12, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null } ]'
        svg1.setPid = 12
        dataCheck = '[{"id":"12","parent_id":0,"name":"Lê Văn Minh","birthday":"1930","_row":0,"_col":8,"_divCont":{}},{"id":21,"parent_id":12,"name":"Le Minh Chinh","married_with":null,"birthday":"1951","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":2,"_divCont":{}},{"id":25,"parent_id":12,"name":"Tran Thi Tuyet Trinh","married_with":21,"birthday":"1949","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":1,"_col":3,"_divCont":{}},{"id":225,"parent_id":21,"name":"Le Quynh Trang","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":0,"_divCont":{}},{"id":228,"parent_id":21,"name":"Luong Sy Hai","married_with":225,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":1,"_divCont":{}},{"id":234,"parent_id":225,"name":"Luong Truong Sinh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":0,"_divCont":{}},{"id":235,"parent_id":225,"name":"Luong Bao Ngan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":1,"_divCont":{}},{"id":226,"parent_id":21,"name":"Le Quynh Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":2,"_divCont":{}},{"id":229,"parent_id":21,"name":"Pham Hong Duong","married_with":226,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":3,"_divCont":{}},{"id":232,"parent_id":226,"name":"Pham Quynh Le","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":2,"_divCont":{}},{"id":233,"parent_id":226,"name":"Pham Hong Nam","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":3,"_divCont":{}},{"id":227,"parent_id":21,"name":"Le Anh Dung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":4,"_divCont":{}},{"id":230,"parent_id":21,"name":"Nguyen Thi Van Anh","married_with":227,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":5,"_divCont":{}},{"id":231,"parent_id":227,"name":"Le Thanh Hai My","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":3,"_col":4,"_divCont":{}},{"id":305,"parent_id":227,"name":"Le Hoang Dieu Linh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":5,"_divCont":{}},{"id":22,"parent_id":12,"name":"Le Thi Xuan","married_with":null,"birthday":"1958","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":7,"_divCont":{}},{"id":26,"parent_id":12,"name":"Nguyen Huu Thanh","married_with":22,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":8,"_divCont":{}},{"id":236,"parent_id":22,"name":"Nguyen Thi Mai","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":6,"_divCont":{}},{"id":238,"parent_id":22,"name":"Vu Xuan Truong","married_with":236,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":7,"_divCont":{}},{"id":274,"parent_id":236,"name":"Vu Truong Phu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":6,"_divCont":{}},{"id":275,"parent_id":236,"name":"Vu Thi Thao Nguyen","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":7,"_divCont":{}},{"id":237,"parent_id":22,"name":"Nguyen Anh Tien","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":8,"_divCont":{}},{"id":276,"parent_id":22,"name":"Le Thi Luong","married_with":237,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":9,"_divCont":{}},{"id":277,"parent_id":237,"name":"Nguyen Gia Bao","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":8,"_divCont":{}},{"id":315,"parent_id":237,"name":"Nguyen Bao Long","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":9,"_divCont":{}},{"id":23,"parent_id":12,"name":"Le Thi Huong","married_with":null,"birthday":"1963","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":11,"_divCont":{}},{"id":27,"parent_id":12,"name":"Le Quoc Hung","married_with":23,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":12,"_divCont":{}},{"id":239,"parent_id":23,"name":"Le Van Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":10,"_divCont":{}},{"id":241,"parent_id":23,"name":"Nguyen Ngoc Hop","married_with":239,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":11,"_divCont":{}},{"id":273,"parent_id":239,"name":"Nguyen Ngoc Phuc","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":10,"_divCont":{}},{"id":240,"parent_id":23,"name":"Le Tuan Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":12,"_divCont":{}},{"id":316,"parent_id":23,"name":"Cao Thi Anh","married_with":240,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":13,"_divCont":{}},{"id":317,"parent_id":240,"name":"Le Thuy Duong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":12,"_divCont":{}},{"id":24,"parent_id":12,"name":"Le Nam Chinh","married_with":null,"birthday":"1966","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":14,"_divCont":{}},{"id":28,"parent_id":12,"name":"Dang Thu Huong","married_with":24,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":15,"_divCont":{}},{"id":242,"parent_id":24,"name":"Le Dang Ha Thanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":14,"_divCont":{}},{"id":243,"parent_id":24,"name":"Le Dang Nhat Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":15,"_divCont":{}},{"id":13,"parent_id":5,"name":"Le Thoa","married_with":12,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":0,"_col":9,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        data = '[ { "id": "17", "parent_id": 0, "name": "L\u00ea V\u0103n S\u1eedu", "birthday": "1937" }, { "id": 18, "parent_id": 5, "name": "Le Thi Truc", "married_with": 17, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 19, "parent_id": 5, "name": "Hoang Viet Hang", "married_with": 17, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": "" }, { "id": 34, "parent_id": 17, "name": "Le Chi Hai", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 35, "parent_id": 17, "name": "Khuong Thi Cuong", "married_with": 34, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 263, "parent_id": 34, "name": "Le Duc Anh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 265, "parent_id": 34, "name": "Hoang Thi Huong", "married_with": 263, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 272, "parent_id": 263, "name": "Le Hoang Anh Vu", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 306, "parent_id": 34, "name": "Bui Thi Ha Huong", "married_with": 263, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 307, "parent_id": 263, "name": "Le Anh Quan", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 264, "parent_id": 34, "name": "Le Duc Tung", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 308, "parent_id": 34, "name": "Pham Thi Hien", "married_with": 264, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 37, "parent_id": 17, "name": "Le Thi Ly", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 36, "parent_id": 17, "name": "Nguyen Van Chi", "married_with": 37, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 266, "parent_id": 37, "name": "Nguyen Huong Tra", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 267, "parent_id": 37, "name": "Nguyen Chi Phuong", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 268, "parent_id": 37, "name": "Nguyen Tu Nhi", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 39, "parent_id": 17, "name": "Le Thi Ha", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 38, "parent_id": 17, "name": "Nguyen Van Dat", "married_with": 39, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 269, "parent_id": 39, "name": "Nguyen Ha Khanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 270, "parent_id": 39, "name": "Nguyen Ha Khanh", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 40, "parent_id": 17, "name": "Le Van Nga", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 0, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" }, { "id": 41, "parent_id": 17, "name": "Nguyen Ha Thai", "married_with": 40, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": 1, "sur_name": null, "last_name": null }, { "id": 271, "parent_id": 40, "name": "Le Duy Long", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": null }, { "id": 309, "parent_id": 40, "name": "Le Bao Chau", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": null, "status": 1, "gender": 2, "child_type": null, "sur_name": null, "last_name": null }, { "id": 42, "parent_id": 17, "name": "Le Minh Sam", "married_with": null, "birthday": "", "orders": 0, "child_of_second_married": 19, "status": 1, "gender": 1, "child_type": null, "sur_name": null, "last_name": "" } ]'
        svg1.setPid = 17
        dataCheck = '[{"id":"17","parent_id":0,"name":"Lê Văn Sửu","birthday":"1937","_row":0,"_col":5,"_divCont":{}},{"id":18,"parent_id":5,"name":"Le Thi Truc","married_with":17,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":0,"_col":6,"_divCont":{}},{"id":19,"parent_id":5,"name":"Hoang Viet Hang","married_with":17,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":"","_row":0,"_col":7,"_divCont":{}},{"id":34,"parent_id":17,"name":"Le Chi Hai","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":1,"_divCont":{}},{"id":35,"parent_id":17,"name":"Khuong Thi Cuong","married_with":34,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":2,"_divCont":{}},{"id":263,"parent_id":34,"name":"Le Duc Anh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":0,"_divCont":{}},{"id":265,"parent_id":34,"name":"Hoang Thi Huong","married_with":263,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":1,"_divCont":{}},{"id":272,"parent_id":263,"name":"Le Hoang Anh Vu","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":0,"_divCont":{}},{"id":306,"parent_id":34,"name":"Bui Thi Ha Huong","married_with":263,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":2,"_divCont":{}},{"id":307,"parent_id":263,"name":"Le Anh Quan","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":3,"_col":1,"_divCont":{}},{"id":264,"parent_id":34,"name":"Le Duc Tung","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":3,"_divCont":{}},{"id":308,"parent_id":34,"name":"Pham Thi Hien","married_with":264,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":2,"_col":4,"_divCont":{}},{"id":37,"parent_id":17,"name":"Le Thi Ly","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":5,"_divCont":{}},{"id":36,"parent_id":17,"name":"Nguyen Van Chi","married_with":37,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":6,"_divCont":{}},{"id":266,"parent_id":37,"name":"Nguyen Huong Tra","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":5,"_divCont":{}},{"id":267,"parent_id":37,"name":"Nguyen Chi Phuong","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":6,"_divCont":{}},{"id":268,"parent_id":37,"name":"Nguyen Tu Nhi","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":7,"_divCont":{}},{"id":39,"parent_id":17,"name":"Le Thi Ha","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":8,"_divCont":{}},{"id":38,"parent_id":17,"name":"Nguyen Van Dat","married_with":39,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":9,"_divCont":{}},{"id":269,"parent_id":39,"name":"Nguyen Ha Khanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":8,"_divCont":{}},{"id":270,"parent_id":39,"name":"Nguyen Ha Khanh","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":9,"_divCont":{}},{"id":40,"parent_id":17,"name":"Le Van Nga","married_with":null,"birthday":"","orders":0,"child_of_second_married":0,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":10,"_divCont":{}},{"id":41,"parent_id":17,"name":"Nguyen Ha Thai","married_with":40,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":1,"sur_name":null,"last_name":null,"_row":1,"_col":11,"_divCont":{}},{"id":271,"parent_id":40,"name":"Le Duy Long","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":10,"_divCont":{}},{"id":309,"parent_id":40,"name":"Le Bao Chau","married_with":null,"birthday":"","orders":0,"child_of_second_married":null,"status":1,"gender":2,"child_type":null,"sur_name":null,"last_name":null,"_row":2,"_col":11,"_divCont":{}},{"id":42,"parent_id":17,"name":"Le Minh Sam","married_with":null,"birthday":"","orders":0,"child_of_second_married":19,"status":1,"gender":1,"child_type":null,"sur_name":null,"last_name":"","_row":1,"_col":12,"_divCont":{}}]'
        test1(JSON.parse(data), JSON.parse(dataCheck))

        function test1(data, dataCheck) {

            let dataGet
            if (data.payload)
                dataGet = data.payload
            else {
                if (!Array.isArray(data)) {
                    dataGet = JSON.parse(data)
                } else
                    dataGet = data
                if (dataGet)
                    if (dataGet.payload)
                        dataGet = dataGet.payload
            }
            console.log("dataCheck BeforeDo: ", svg1.dataPart, " \nStatus: ", status);

            svg1.dataAll = [...dataGet]
            svg1.dataPart = dataGet
            svg1.reDrawTree(0)


            svg1.setZoomAble()

            // return

            console.log("dataCheck AfterDo: ", svg1.dataPart, " \nStatus: ", status);

            let dataDoing = svg1.dataPart
            let strError = ''
            let totalInCheck = dataCheck.length
            let totalInDoing = dataDoing.length
            if (totalInDoing != totalInCheck)
                strError = ' Missing:  ' + (totalInDoing - totalInCheck) + "<br>"
            for (let inDoing of dataDoing) {
                let found = 0
                let validPos = 0
                for (let inCheck of dataCheck) {
                    if (inCheck.id == inDoing.id) {
                        found = 1
                        if (inDoing._col == inCheck._col && inDoing._row == inCheck._row) {
                            validPos = 1
                        }
                    }
                }
                if (!found) {
                    strError += "<br>* Not Found: " + inDoing.name + " | X*Y = " + inDoing._row + "x" + inDoing._col
                } else if (!validPos) {
                    strError += "<br>- Not valid pos: " + inDoing.name + " x*y | Valid = " + inDoing._row + "x" + inDoing._col
                }
            }
            for (let inCheck of dataCheck) {
                let found = 0
                let validPos = 0
                for (let inDoing of dataDoing) {
                    if (inCheck.id == inDoing.id) {
                        found = 1
                        if (inDoing._col == inCheck._col && inDoing._row == inCheck._row) {
                            validPos = 1
                        }
                    }
                }
                if (!found) {
                    strError += "<br>* Not Found: " + inCheck.name + " | X*Y = " + inCheck._row + "x" + inCheck._col
                } else if (!validPos) {
                    strError += "<br>- Not valid pos: " + inCheck.name + " x*y | Valid = " + inCheck._row + "x" + inCheck._col
                }
            }
            if (strError) {
                strError = "<div style='color: red'> " + strError + " </div>"
                document.body.innerHTML = "Have in check: " + totalInCheck + " / In Doing = " + totalInDoing + "<br>ERROR LIST<br>" + strError + "<hr>" + document.body.innerHTML
            } else {
                strError = "<b style='color: green'> " + "GOOD ! TEST OK!" + " </b> <br>"
                document.body.innerHTML = strError + document.body.innerHTML
            }
        }
    }

    static resetDefault(svgId) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        svg.optDisableApiForTestLocalOnly = 0
        svg.optShowMarried = 1
        svg.optShowOnlyMan = 0
        svg.optRemoveImage = 0
        svg.clearResetAllSvgToReDraw()
        svg.reDrawTree()
        svg.updateBBox()
        svg.resize()
        svg.center()
    }


    static setOnlyMan(svgId) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        svg.optShowOnlyMan = 1
        svg.clearResetAllSvgToReDraw()
        svg.reDrawTree()
        svg.updateBBox()
        svg.resize()
        svg.center()
    }

    static setDisableMarried(svgId) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        svg.optShowMarried = 0
        svg.clearResetAllSvgToReDraw()
        svg.reDrawTree()
        svg.updateBBox()
        svg.resize()
        svg.center()
    }

    static setRemoveImage(svgId) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        svg.optRemoveImage = 1
        svg.clearResetAllSvgToReDraw()
        svg.reDrawTree()
        svg.updateBBox()
        svg.resize()
        svg.center()
    }

    static setDisableApiForTestLocal(svgId) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        svg.optDisableApiForTestLocalOnly = 1
        svg.clearResetAllSvgToReDraw()
        svg.reDrawTree()
        svg.updateBBox()
        svg.resize()
        svg.center()
    }

    static createNewTree(svgId) {
        let name = $("#first_member_name_of_tree").val()
        if (!name || name.length < 2) {
            alert("Tên phải lớn hơn 1 ký tự");
            return
        }

        let tree = clsTreeTopDownCtrl.doingSvgObj = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        let objNew = {name: name, parent_id: 0, gender: 1}

        let ret
        if (ret = tree.nodeAddApi(objNew, 'add_child', 'add_new_root')) {
            let url = jctool.getUrlNotParam() + "?pid=" + ret
            window.location.href = url
        } else {
            alert("Có lỗi không thể tạo cây mới!");
        }

    }

    nodeDeleteApi(tree, obj) {

        let idItem = obj.id
        console.log("Delete item1..", idItem);

        let mm = tree.findGetAllChildsDeepOfObjAndMarried(obj)
        if (!mm)
            mm = [obj]
        else
            mm.push(obj)

        let strDelId = clsTreeTopDownCtrl.getStringIdOfNodeArraySeparateByComma(mm)
        if (!strDelId)
            strDelId = idItem

        let ret = 0
        let urlAct = tree.apiDelete + "?id=" + strDelId
        $.ajax({
            url: urlAct,
            async: false,
            type: "GET",
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Bearer ' + tree.apiBearToken);
            },
            success: function (data, status) {
                console.log("Data: ", data, " \nStatus: ", status);
                console.log("Delete item1..", idItem);

                ret = 1
            },
            error: function (jqXHR, exception) {
                alert("Error...." + jqXHR.status)
                console.log(" Eror....");
            },
        });
        return ret
    }

    nodeAddApi(objNode, cmd, extraCmd) {
        let urlAct = this.apiAdd
        let type = "POST"
        let idRet = false
        $.ajax({
            url: urlAct,
            async: false,
            type: type,
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Bearer ' + this.apiBearToken);
            },
            data: objNode,
            success: function (data, status) {
                console.log("Data: ", data, " \nStatus: ", status);
                if (cmd == 'add_child' || cmd == 'add_married') {
                    if (isNaN(data.payload)) {
                        alert("Error add item, not valid number?")
                        return false
                    }
                    idRet = data.payload
                    objNode.id = data.payload
                }
                if (extraCmd != 'add_new_root')
                    clsTreeTopDownCtrl.nodeAction(
                        cmd,
                        objNode,
                        clsTreeTopDownCtrl.doingNodeObj
                    )
            },
            error: function (jqXHR, exception) {
                alert("Error...." + jqXHR.status)
                console.log(" Eror....");
                return false
            },
        });

        return idRet
    }

    nodeEditApi(objNode) {
        console.log(" nodeEditApi: ", objNode);
        let dataPost2 = {
            name: objNode.name,
            birthday: objNode.birthday,
            orders: objNode.orders,
            gender: objNode.gender,
            image_list: objNode.image_list
        }

        if (!objNode.name || objNode.name.length < 2) {
            alert("Tên phải lớn hơn 1 ký tự");
            return
        }

        let urlAct = this.apiUpdate + "/" + objNode.id
        let type = "POST"
        $.ajax({
            url: urlAct,
            async: false,
            type: type,
            beforeSend: function (xhr) {
                xhr.setRequestHeader('Authorization', 'Bearer ' + this.apiBearToken);
            },
            data: dataPost2,
            success: function (data, status) {
                console.log("Data: ", data, " \nStatus: ", status);

                clsTreeTopDownCtrl.nodeAction(
                    'edit_node',
                    objNode,
                    clsTreeTopDownCtrl.doingNodeObj
                )

                $("#dialog-node-add").dialog("close");
            },
            error: function (jqXHR, exception) {
                alert("Error...." + jqXHR.status)
                console.log(" Eror....");
            },
        });

    }

    static showDebugIdOrders(svgId) {
        //let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)

        $(".debug_id_orders").toggle();
        //    svg.optShowDebugIdAndOrders = 0

    }

    static selectBackGround(svgId, manOrWoman) {
        let svg = clsTreeTopDownCtrl.getInstanceSvgById(svgId)
        // $('.node_cont').css('background-image', 'url("/public/images/khung-anh1.png")')
        svg.selectingManWomanBackGround = manOrWoman
        $("#dialog-select-background").dialog('open')
        if (manOrWoman == 2)
            $("#dialog-select-background").dialog('option', 'title', 'Chọn khung ảnh cho NỮ');
        else
            $("#dialog-select-background").dialog('option', 'title', 'Chọn khung ảnh cho NAM');

    }

    uploadFile(file_id = 'file_id') {

        let urlUpload = this.apiUploadImage
        let retUpload = 0

        if ($('#' + file_id)[0].files[0]) {

            console.log("Filesize: " , $('#' + file_id)[0].files[0].size);

            if($('#' + file_id)[0].files[0].size > 52400){
                alert("Can not upload file, file is too big: " + $('#' + file_id)[0].files[0].size);
                return 0
            }

            // const config = {
            //     file: $('#' + file_id)[0].files[0],
            //     maxSize: 200
            // };
            //
            // const resizedImage = await resizeImage(config)

            // console.log("upload resized image", resizedImage)

            let formData = new FormData();
            formData.append('file_data',
                $('#file_id')[0].files[0]
                // resizedImage
            );

            //Upload image before:
            $.ajax({
                url: urlUpload,
                async: false,
                type: 'POST',
                processData: false,  // tell jQuery not to process the data
                contentType: false,  // tell jQuery not to set contentType
                beforeSend: function (xhr) {
                    xhr.setRequestHeader('Authorization', 'Bearer ' + this.apiBearToken);
                },
                data: formData,
                success: function (data, status) {
                    console.log("DataUpload ret: ", data, " \nStatus: ", status);
                    if (!data || !data.payload || isNaN(data.payload.id)) {
                        console.log("Error 1");
                        return
                    }
                    retUpload = data.payload
                },
                error: function (jqXHR, exception) {
                    alert("Error...." + jqXHR.status)
                    console.log(" Error upload file....");

                },
            });
        }

        console.log("RetUpload ", retUpload);

        return retUpload

    }
}


$(function () {
    $.contextMenu({
        selector: '.context-menu-one',
        trigger: 'left',
        callback: function (key, options) {
            let idItem = options.$trigger.attr("data-id");
            console.log(" options idItem = ", idItem, key, options.$trigger);

            $("#title_dialog_node").html("")

            let idSvgRoot = options.$trigger.closest('.root_svg').attr('id')
            clsTreeTopDownCtrl.doingNodeObj = clsTreeTopDownCtrl.getInstanceSvgById(idSvgRoot).getObjFromId(idItem)
            // let treeIns = new clsTreeTopDownCtrl()
            clsTreeTopDownCtrl.doingSvgObj = clsTreeTopDownCtrl.getInstanceSvgById(idSvgRoot)

            clsTreeTopDownCtrl.doingCmd = key

            console.log(" clsTreeTopDownCtrl.doingNodeObj = ", clsTreeTopDownCtrl.doingNodeObj);

            //Clear all Input before edit, add
            $("#dialog-node-add").find("input[type=text]").each(function () {
                $(this).val("")
            });
            $("#dialog-node-add").find("input[type=file]").each(function () {
                $(this).val("")
            });

            // var m = "clicked: " + key;
            //window.console && console.log(m) || alert(m);
            if (key == 'edit_node') {
                $("#dialog-node-add").dialog('open')

                $("#new_name").val(clsTreeTopDownCtrl.doingNodeObj.name)
                $("#new_birthday").val(clsTreeTopDownCtrl.doingNodeObj.birthday)
                $("#new_orders").val(clsTreeTopDownCtrl.doingNodeObj.orders)
                $("input[name=new_gender][value=" + clsTreeTopDownCtrl.doingNodeObj.gender + "]").prop('checked', true);
                $("#title_dialog_node").html("Thông tin của: <b>" + clsTreeTopDownCtrl.doingNodeObj.name + "</b>");
            }

            if (key == 'add_child') {
                $("#dialog-node-add").dialog('open')

                $("#title_dialog_node").html("Thêm con cho: <b> " + clsTreeTopDownCtrl.doingNodeObj.name + "</b>")
            }

            if (key == 'add_married') {
                if (clsTreeTopDownCtrl.doingNodeObj.married_with) {
                    alert(clsTreeTopDownCtrl.doingNodeObj.name + ": là Dâu-Rể, nên không thể thêm kết hôn!")
                    return
                } else {
                    $("#dialog-node-add").dialog('open')
                    if (clsTreeTopDownCtrl.doingNodeObj.gender == 2)
                        $("#title_dialog_node").html("Thêm chồng cho: <b>" + clsTreeTopDownCtrl.doingNodeObj.name + "</b>")
                    else
                        $("#title_dialog_node").html("Thêm vợ cho: <b>" + clsTreeTopDownCtrl.doingNodeObj.name + "</b>")
                }
            }

            if (key == 'view_this_node') {
                let url = jctool.setCurrentUrlParamAndGo("pid", idItem, 1);
                if (clsTreeTopDownCtrl.doingNodeObj.married_with)
                    url = jctool.setCurrentUrlParamAndGo("pid", clsTreeTopDownCtrl.doingNodeObj.married_with, 1);
                window.location.href = url
            }

            if (key == 'delete_node') {

                let tree = clsTreeTopDownCtrl.doingSvgObj
                let obj = clsTreeTopDownCtrl.doingNodeObj

                if (tree.optDisableApiForTestLocalOnly) {
                    tree.deleteObjAndAllChildAndMarried(obj)
                    tree.reDrawTree()
                    return
                }

                let mm = tree.findGetAllChildsDeepOfObjAndMarried(obj)
                if (!mm)
                    mm = [obj]
                else
                    mm.push(obj)

                //nếu dùng API thì mới cần phải hỏi...
                if (!tree.optDisableApiForTestLocalOnly) {
                    if (mm.length > 1) {
                        let ans = prompt('Cảnh báo: bạn đang xóa một cây nhiều hơn một phần tử\nĐể chắc chắn, hãy nhập từ: "ok" vào ô sau');
                        if (ans == 'ok' || ans == '1')
                            console.log("Đồng ý xóa");
                        else {
                            console.log("Không Đồng ý xóa");
                            return
                        }
                    } else {
                        let conf = confirm("Bấm vào nút OK để tiếp tục");
                        if (conf)
                            console.log("Đồng ý xóa");
                        else {
                            console.log("Không Đồng ý xóa");
                            return
                        }
                    }
                }
                if (clsTreeTopDownCtrl.doingSvgObj.nodeDeleteApi(tree, obj)) {
                    tree.deleteObjAndAllChildAndMarried(obj)
                    tree.reDrawTree()
                }
            }
        },
        items: {
            "edit_node": {name: "Sửa", icon: "edit"},
            "add_child": {name: "Thêm con", icon: "add"},
            'add_married': {name: "Thêm vợ chồng", icon: "add"},
            "delete_node": {name: "Xóa", icon: "delete"},
            'view_this_node': {name: "Xem riêng nhánh này", icon: "tree"},
            "sep1": "---------",
            "quit": {
                name: "Quit", icon: function () {
                    return 'context-menu-icon context-menu-icon-quit';
                }
            }
        }
    });

    $('.context-menu-one').on('click', function (e) {
        console.log('clicked', this);
    })
});


$(function () {

    $("#dialog-node-add").dialog({
        autoOpen: false,
        resizable: false,
        height: "auto",
        width: 300,
        modal: true,
        buttons: {
            "Ghi lại": function () {

                let nodeDoing = clsTreeTopDownCtrl.doingNodeObj
                let svgDoing = clsTreeTopDownCtrl.doingSvgObj

                let objNodeNeedAction = null
                //Nếu thêm mới thì tạo node mới, nếu ko thì lấy node trong data
                if (clsTreeTopDownCtrl.doingCmd == 'add_married' || clsTreeTopDownCtrl.doingCmd == 'add_child')
                    objNodeNeedAction = {}
                else
                    objNodeNeedAction = nodeDoing

                objNodeNeedAction.name = $('#new_name').val()
                objNodeNeedAction.birthday = $('#new_birthday').val()
                objNodeNeedAction.orders = $('#new_orders').val()
                objNodeNeedAction.gender = $("input[name=new_gender]:checked").val()

                if (!objNodeNeedAction.name || objNodeNeedAction.name.length < 2) {
                    alert("Tên phải lớn hơn 1 ký tự");
                    return
                }

                if(isNaN(objNodeNeedAction.orders)){
                    alert("Thứ tự phải là số");
                    return
                }

                if (svgDoing.optDisableApiForTestLocalOnly) {
                    clsTreeTopDownCtrl.nodeAction(clsTreeTopDownCtrl.doingCmd,
                        objNodeNeedAction,
                        clsTreeTopDownCtrl.doingNodeObj
                    )
                    $("#dialog-node-add").dialog("close");
                    return
                }

                console.log(" clsTreeTopDownCtrl.idAct = ", nodeDoing);

                if ($('#file_id')[0].files[0]) {

                    let retUpload = svgDoing.uploadFile('file_id')
                    if (!retUpload) {
                        alert("Can not upload file!")
                        return
                    }
                    objNodeNeedAction.image_list = retUpload.id
                    objNodeNeedAction._image_list = [retUpload]
                    console.log(" OBJ to update upload file: ", objNodeNeedAction);
                }

                if (clsTreeTopDownCtrl.doingCmd == 'add_married' || clsTreeTopDownCtrl.doingCmd == 'add_child') {

                    if (clsTreeTopDownCtrl.doingCmd == 'add_married') {
                        objNodeNeedAction.parent_id = nodeDoing.parent_id
                        objNodeNeedAction.married_with = nodeDoing.id
                    }

                    if (clsTreeTopDownCtrl.doingCmd == 'add_child') {
                        console.log(" add_child Doing node : ", nodeDoing);
                        if (nodeDoing) {
                            objNodeNeedAction.parent_id = nodeDoing.id
                            //Nếu là thêm con cho vợ/chồng, thì phải gán parent về gốc
                            if (nodeDoing.married_with) {
                                let pObj = svgDoing.getObjFromId(nodeDoing.married_with)
                                objNodeNeedAction.parent_id = pObj.id
                                //Nếu như là vợ chồng 2 của bố mẹ, thì sẽ cần gán child_of_second_married
                                if (nodeDoing._col > pObj._col + 1) {
                                    objNodeNeedAction.child_of_second_married = nodeDoing.id
                                    console.log(" add_child Doing node1 : ", nodeDoing);
                                }
                            }
                        } else {
                            objNodeNeedAction.parent_id = 0
                        }
                    }
                    svgDoing.nodeAddApi(objNodeNeedAction, clsTreeTopDownCtrl.doingCmd)
                }

                if (clsTreeTopDownCtrl.doingCmd == 'edit_node') {
                    svgDoing.nodeEditApi(objNodeNeedAction)
                }

                $("#dialog-node-add").dialog("close");

            },
            "Bỏ qua": function () {
                $(this).dialog("close");
            }
        }
    });

    $("#dialog-select-background").dialog({
        autoOpen: false,
        resizable: false,
        height: "600",
        width: "800",
        modal: true,
        buttons: {
            // "Ghi lại": function () {
            //     console.log(" Chọn ");
            //     $(this).dialog("close");
            // },
            "Đóng lại": function () {
                console.log(" Ghi lai...");
                $(this).dialog("close");
            }
        }
    });

    $(".img_bg_node_svg img").on('click', function () {

        //alert("click to: " + $(this).attr('src'))

        let srcImg = $(this).attr('data-src')
        console.log("Datasrc = ", srcImg);

        let svg = clsTreeTopDownCtrl.allInstance[0]
        $('.node_cont').each(function () {
            if (!$(this).attr('data-gender') || $(this).attr('data-gender') == 'null' || $(this).attr('data-gender') == svg.selectingManWomanBackGround)
                $(this).css('background-image', 'url("' + srcImg + '")')
        })

    })

    // dlg.dialog( "open" );


    $('#file_id').imageUploadResizer({
        max_width: 500, // Defaults 1000
        max_height: 500, // Defaults 1000
        quality: 0.8, // Defaults 1
        do_not_resize: ['gif', 'svg'], // Defaults []
    });

});


class clsTreeNode {
    id
    name
    parent_id
    married_with

    birthday
    child_of_second_married
    child_type
    gender
    has_child
    last_name
    orders
    status
    sur_name
    image_list
    _image_list
    _mark_add_new
    _row = -1
    _col = -1
    _divCont


}
